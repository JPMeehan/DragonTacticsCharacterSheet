<input type="hidden" name="attr_Version" value=2>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" checked="checked"><span title="General Info" ></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2"><span title="Combat" ></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3"><span title="Character Details" ></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4"><span title="Equipment" ></span>

<!--General Info-->
<div class="sheet-tab-content sheet-tab1">
    <div class='sheet-3colrow'>
        <h2>Basic Info</h2>
        <div class='sheet-BasicInfo'>
            <div class='sheet-col'>
                <label> Character Name </label> <input type="text" name="attr_character_name" />
            </div>

            <div class='sheet-col'>
                <div class='sheet-raceclass'>
                    <input type="text" name="attr_Race" /> Character Race <br>
                    <input type="text" name="attr_Class" /> Character Class <br>
                </div>
            </div>

            <div class='sheet-col'>
				<input type="number" name="attr_level" value=1 min=1 max=30> Level 
				<input type="hidden" name="attr_level-half" value=0>
				<br>
				<input type="number" name="attr_Quest" value=0 /> Quest Bonus <br>
				<input type="hidden" name="attr_actionpoints" value=1>
				<input type="hidden" name="attr_actionpoints_max" value=1>
			</div>
        </div>
		<!--Attributes, Skills, Competencies-->
		<div class='sheet-3colrow'>
			<!--Attributes-->
            <div class='sheet-col' style="width: 25%">
                <h2>Attributes</h2>
                <input type="number" name="attr_Strength" value=10 /> Strength 
                <button type='roll' value='&{template:skillcheck} {{name=Strength Check}} {{check=[[1d20 + @{strmod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{strmod} + @{level-half} + @{Quest}]]}}' name='roll_StrengthCheck'></button>
				<input name="attr_strmod" type="hidden" value=0>
				<br>

                <input type="number" name="attr_Constitution" value=10 /> Constitution 
				<button type='roll' value='&{template:skillcheck} {{name=Constitution Check}} {{check=[[1d20 + @{conmod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{conmod} + @{level-half} + @{Quest}]]}}' name='roll_ConstitutionCheck'></button>
                <input name="attr_conmod" type="hidden" value=0>
				<br>
				
                <input type="number" name="attr_Dexterity" value=10 /> Dexterity 
				<button type='roll' value='&{template:skillcheck} {{name=Dexterity Check}} {{check=[[1d20 + @{dexmod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{dexmod} + @{level-half} + @{Quest}]]}}' name='roll_DexterityCheck'></button>
                <input name="attr_dexmod" type="hidden" value=0>
				<br>

                <input type="number" name="attr_Intelligence" value=10 /> Intelligence 
				<button type='roll' value='&{template:skillcheck} {{name=Intelligence Check}} {{check=[[1d20 + @{intmod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{intmod} + @{level-half} + @{Quest}]]}}' name='roll_IntelligenceCheck'></button>
                <input name="attr_intmod" type="hidden" value=0>
				<br>

                <input type="number" name="attr_Wisdom" value=10 /> Wisdom 
				<button type='roll' value='&{template:skillcheck} {{name=Wisdom Check}} {{check=[[1d20 + @{wismod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{wismod} + @{level-half} + @{Quest}]]}}' name='roll_WisdomCheck'></button>
                <input name="attr_wismod" type="hidden" value=0>
				<br>

                <input type="number" name="attr_Charisma" value=10 /> Charisma 
				<button type='roll' value='&{template:skillcheck} {{name=Charisma Check}} {{check=[[1d20 + @{chamod} + @{level-half} + @{Quest}]]}} {{checkadv=[[1d20 + @{chamod} + @{level-half} + @{Quest}]]}}' name='roll_CharismaCheck'></button>
                <input name="attr_chamod" type="hidden" value=0>
				<br>
            </div>
			<!--Skills--> 
            <div class='sheet-col' style="width: 40%">
                <h2>Skills</h2>
				<table class="sheet-skilltable" style="width:100%">
					<tr>
						<th>Trained, Misc.</th>
						<th>Bonus</th>
						<th>Skill</th>
					</tr>
					<tr> 
						<td><input type='checkbox' name='attr_Acrobatics-Train' value=4 /> <input type="number" name="attr_Acrobatics-MiscBonus" value=0> <input type='hidden' name='attr_Acrobatics-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Acrobatics Check}} {{Trained=@{Acrobatics-Trained}}} {{check=[[1d20 @{Acrobatics}]]}} {{checkadv=[[1d20 @{Acrobatics}]]}}' name='roll_AcrobaticsCheck'></button><span name="attr_Acrobatics" value="+0" style="font-size:140%;"></span></td>
						<td>Acrobatics (Dex)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Appeal-Train' value=4 /> <input type="number" name="attr_Appeal-MiscBonus" value=0><input type='hidden' name='attr_Appeal-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Appeal Check}} {{Trained=@{Appeal-Trained}}} {{check=[[1d20 @{Appeal}]]}} {{checkadv=[[1d20 @{Appeal}]]}}' name='roll_AppealCheck'></button><span name="attr_Appeal" value="+0" style="font-size:140%;"></span></td>
						<td>Appeal (Cha)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Arcana-Train' value=4 /> <input type="number" name="attr_Arcana-MiscBonus" value=0><input type='hidden' name='attr_Arcana-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Arcana Check}} {{Trained=@{Arcana-Trained}}} {{check=[[1d20 @{Arcana}]]}} {{checkadv=[[1d20 @{Arcana}]]}}' name='roll_ArcanaCheck'></button><span name="attr_Arcana" value="+0" style="font-size:140%;"></span></td>
						<td>Arcana (Int)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Athletics-Train' value=4 />  <input type="number" name="attr_Athletics-MiscBonus" value=0><input type='hidden' name='attr_Athletics-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Athletics Check}} {{Trained=@{Athletics-Trained}}} {{check=[[1d20 @{Athletics}]]}} {{checkadv=[[1d20 @{Athletics}]]}}' name='roll_AthleticsCheck'></button><span name="attr_Athletics" value="+0" style="font-size:140%;"></span></td>
						<td>Athletics (Str)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Debate-Train' value=4 />  <input type="number" name="attr_Debate-MiscBonus" value=0><input type='hidden' name='attr_Debate-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Debate Check}} {{Trained=@{Debate-Trained}}} {{check=[[1d20 @{Debate}]]}} {{checkadv=[[1d20 @{Debate}]]}}' name='roll_DebateCheck'></button><span name="attr_Debate" value="+0" style="font-size:140%;"></span></td>
						<td>Debate (Int)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Endurance-Train' value=4 />  <input type="number" name="attr_Endurance-MiscBonus" value=0><input type='hidden' name='attr_Endurance-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Endurance Check}} {{Trained=@{Endurance-Trained}}} {{check=[[1d20 @{Endurance}]]}} {{checkadv=[[1d20 @{Endurance}]]}}' name='roll_EnduranceCheck'></button><span name="attr_Endurance" value="+0" style="font-size:140%;"></span></td>
						<td>Endurance (Con)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_HandleAnimal-Train' value=4 /> <input type="number" name="attr_HandleAnimal-MiscBonus" value=0><input type='hidden' name='attr_HandleAnimal-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Handle Animal Check}} {{Trained=@{HandleAnimal-Trained}}} {{check=[[1d20 @{HandleAnimal}]]}} {{checkadv=[[1d20 @{HandleAnimal}]]}}' name='roll_HandleAnimalCheck'></button><span name="attr_HandleAnimal" value="+0" style="font-size:140%;"></span></td>
						<td>Handle Animal (Wis)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Insight-Train' value=4 /> <input type="number" name="attr_Insight-MiscBonus" value=0><input type='hidden' name='attr_Insight-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Insight Check}} {{Trained=@{Insight-Trained}}} {{check=[[1d20 @{Insight}]]}} {{checkadv=[[1d20 @{Insight}]]}}' name='roll_InsightCheck'></button><span name="attr_Insight" value="+0" style="font-size:140%;"></span></td>
						<td>Insight (Wis)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Impress-Train' value=4 /> <input type="number" name="attr_Impress-MiscBonus" value=0><input type='hidden' name='attr_Impress-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Impress Check}} {{Trained=@{Impress-Trained}}} {{check=[[1d20 @{Impress}]]}} {{checkadv=[[1d20 @{Impress}]]}}' name='roll_ImpressCheck'></button><span name="attr_Impress" value="+0" style="font-size:140%;"></span></td>
						<td>Impress (Cha)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Medicine-Train' value=4 />  <input type="number" name="attr_Medicine-MiscBonus" value=0><input type='hidden' name='attr_Medicine-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Medicine Check}} {{Trained=@{Medicine-Trained}}} {{check=[[1d20 @{Medicine}]]}} {{checkadv=[[1d20 @{Medicine}]]}}' name='roll_MedicineCheck'></button><span name="attr_Medicine" value="+0" style="font-size:140%;"></span></td>
						<td>Medicine (Wis)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Perception-Train' value=4 /> <input type="number" name="attr_Perception-MiscBonus" value=0><input type='hidden' name='attr_Perception-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Perception Check}} {{Trained=@{Perception-Trained}}} {{check=[[1d20 @{Perception}]]}} {{checkadv=[[1d20 @{Perception}]]}}' name='roll_PerceptionCheck'></button><span name="attr_Perception" value="+0" style="font-size:140%;"></span></td>
						<td>Perception (Wis)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Repair-Train' value=4 /> <input type="number" name="attr_Repair-MiscBonus" value=0><input type='hidden' name='attr_Repair-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Repair Check}} {{Trained=@{Repair-Trained}}} {{check=[[1d20 @{Repair}]]}} {{checkadv=[[1d20 @{Repair}]]}}' name='roll_RepairCheck'></button><span name="attr_Repair" value="+0" style="font-size:140%;"></span></td>
						<td>Repair (Int)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Research-Train' value=4 /> <input type="number" name="attr_Research-MiscBonus" value=0><input type='hidden' name='attr_Research-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Research Check}} {{Trained=@{Research-Trained}}} {{check=[[1d20 @{Research}]]}} {{checkadv=[[1d20 @{Research}]]}}' name='roll_ResearchCheck'></button><span name="attr_Research" value="+0" style="font-size:140%;"></span></td>
						<td>Research (Int)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_SleightofHand-Train' value=4 /> <input type="number" name="attr_SleightofHand-MiscBonus" value=0><input type='hidden' name='attr_SleightofHand-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Sleight of Hand Check}} {{Trained=@{SleightofHand-Trained}}} {{check=[[1d20 @{SleightofHand}]]}} {{checkadv=[[1d20 @{SleightofHand}]]}}' name='roll_SleightofHandCheck'></button><span name="attr_SleightofHand" value="+0" style="font-size:140%;"></span></td>
						<td>Sleight of Hand (Dex)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Socialize-Train' value=4 /> <input type="number" name="attr_Socialize-MiscBonus" value=0><input type='hidden' name='attr_Socialize-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Socialize Check}} {{Trained=@{Socialize-Trained}}} {{check=[[1d20 @{Socialize}]]}} {{checkadv=[[1d20 @{Socialize}]]}}' name='roll_SocializeCheck'></button><span name="attr_Socialize" value="+0" style="font-size:140%;"></span></td>
						<td>Socialize (Cha)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Stealth-Train' value=4 /> <input type="number" name="attr_Stealth-MiscBonus" value=0><input type='hidden' name='attr_Stealth-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Stealth Check}} {{Trained=@{Stealth-Trained}}} {{check=[[1d20 @{Stealth}]]}} {{checkadv=[[1d20 @{Stealth}]]}}' name='roll_StealthCheck'></button><span name="attr_Stealth" value="+0" style="font-size:140%;"></span></td>
						<td>Stealth (Dex)</td>
					</tr>
					<tr>
						<td><input type='checkbox' name='attr_Survival-Train' value=4 /> <input type="number" name="attr_Survival-MiscBonus" value=0><input type='hidden' name='attr_Survival-Trained' value="Untrained" /></td>
						<td><button type='roll' value='&{template:skillcheck} {{name=Survival Check}} {{Trained=@{Survival-Trained}}} {{check=[[1d20 @{Survival}]]}} {{checkadv=[[1d20 @{Survival}]]}}' name='roll_SurvivalCheck'></button><span name="attr_Survival" value="+0" style="font-size:140%;"></span></td>
						<td>Survival (Wis)</td>
					</tr>
				</table>
				
                <label title="Jack of All Trades"><input type='checkbox' name='attr_JackOfAllTrades' value=2 /> Jack of All Trades</label> 
				<label title="Bard"><input type='checkbox' name='attr_BardJack' value=1 /> Bard </label> 
            </div>
			<!--Competencies-->
            <div class='sheet-col' style="width: 25%">
                <h2>Competencies</h2>
                <fieldset class="repeating_competencies">            
                      <input type="text" name="attr_competency" />        
                </fieldset>
            </div>
        </div> 
    </div>
</div>

<!--Combat-->
<div class="sheet-tab-content sheet-tab2">
    <div class='sheet-2colrow'>
    <!--Key Numbers-->
        <div class='sheet-col'>
            <h2>Health</h2>
			<label title="Movement Speed"><input type="text" name="attr_speed" value="12m"> Movement</label>
            <label title="HP"><input type="number" name="attr_HP" value=20> / <input type="number" name="attr_HP_max" value=20> HP</label>
            <input type="number" name="attr_HP-Bloodied" value=10> Bloodied value <input type="number" name="attr_HP-surgeValue" value=5> Surge Value <br>
			<label title="Surges"><input type="number" name="attr_surges" value=6> / <input type="number" name="attr_surges_max" value=6> Surges</label>
			<br>
        </div>
		<div class='sheet-col'>
            <h2>Defenses</h2>
			<input type="number" name="attr_AC" value=10 class='sheet-defense'> Armor Class (misc bonus: <input type="number" name="attr_AC-Misc" value=0> )
			<br>
            <input type="number" name="attr_Fort" value=10 class='sheet-defense'> Fortitude (class/misc bonus: <input type="number" name="attr_Fort-Misc" value=0> )
			<br>
            <input type="number" name="attr_Ref" value=10 class='sheet-defense'> Reflex (class/misc bonus: <input type="number" name="attr_Ref-Misc" value=0> )
			<br>
            <input type="number" name="attr_Will" value=10 class='sheet-defense'> Will (class/misc bonus: <input type="number" name="attr_Will-Misc" value=0> )
			<br>
			<label title="Persistent Effects">Persistent Effects: <textarea name="attr_Persistent-Effect-Text"></textarea></label>
        </div>
    </div>
    <h2>Powers</h2>
	<button type='roll' name="roll_Striker_Damage" value='&{template:damage} {{name=Striker Dice}} {{damage=[[@{strikerdice}]]}} {{dmgcrit=[[@{strikercrit}]]}}'> </button> <label title="Striker Dice" class="sheet-inlineLabel"> <input type="text" name="attr_strikerdice" value="" class="sheet-diceInput"> Striker dice</label> 
    <input type="hidden" value="1d4" name="attr_strikercrit">
	<div class='sheet-3colrow'>
		<!-- AtWills -->
        <div class='sheet-col'>
            <h3>At-Will Powers</h3>
            <fieldset class="repeating_AtWills">
				<label title="Name" class="inlineLabel">Name<input name="attr_AtWill-Name" type="text"></label> <input type="checkbox" value=1 checked="true" name="attr_AtWill-display" class="sheet-arrow">
				<div class="sheet-body">
					<label title="Action">Action<select name="attr_AtWill-ActionType" class="sheet-ActionType">
						<option value="1">Standard</option>
						<option value="2">Move</option>
						<option value="3">Minor</option>
						<option value="4">Free</option>
						<option value="5">Immediate Interrupt</option>
						<option value="6">Immediate Reaction</option>
						<option value="7">No Action</option>
					</select></label> 
					<label title="Range and Targets">Range and Targets: <input type="text" name="attr_AtWill-RangeTargets"></label> 
					<label title="Power Text">Power Text: <textarea name="attr_AtWill-Power-Text"></textarea></label>
					<div>
						Attack? <input type="checkbox" value=1 checked="true" name="attr_AtWill-IsAttack" class="sheet-arrow">
						<div class="sheet-body">
							<span class='sheet-AttSelect'>
								<select name="attr_AtWill-Ability">
									<option value="strmod">Strength</option>
									<option value="conmod">Constitution</option>
									<option value="dexmod">Dexterity</option>
									<option value="intmod">Intelligence</option>
									<option value="wismod">Wisdom</option>
									<option value="chamod">Charisma</option>
								</select> 
							</span> 
							vs. 
							<span class='sheet-DefSelect'>
								<select name='attr_AtWill-DefSelect'>
									<option value="AC">AC</option>
									<option value="Fort">Fortitude</option>
									<option value="Ref">Reflex</option>
									<option value="Will">Will</option>
								</select>
							</span> 
							<br>
							<select name="attr_AtWill-Accessory" class="sheet-AccesorySelect">
									<option value="wep1"> Weapon 1 </option>
									<option value="wep2"> Weapon 2 </option>
									<option value="wep3"> Weapon 3 </option>
									<option value="imp1"> Implement 1 </option>
									<option value="imp2"> Implement 2 </option>
							</select>
							<input type="number" value=0 name="attr_AtWill-HitBonus">
							<button type='roll' name="roll_AtWill-Attack" value='&{template:attack} {{name=@{AtWill-Name}}} {{RangeTargets=@{AtWill-RangeTargets}}}{{attack=[[1d20+@{AtWill-HitBonus}]]}} {{attackadv=[[1d20+@{AtWill-HitBonus}]]}} {{defense=@{AtWill-DefSelect}}}'> </button>
							<br> Damage roll: <button type='roll' name="roll_AtWill-Damage" value='&{template:damage} {{name=@{AtWill-Name}}} {{damage=[[@{AtWill-damagedice} + @{AtWill-flatdamage}]]}} {{dmgcrit=[[@{AtWill-critdice} + @{AtWill-critflat}]]}} {{dmgtype=@{AtWill-damagetype}}}'> </button>
							<label title="Damage Type"> Damage Type <input type="text" name="attr_AtWill-damagetype" class="sheet-diceInput" value="Fire"></label>
							<label title="Damage Dice"> Damage Dice <input type="text" name="attr_AtWill-damagedice" class="sheet-diceInput" value="1d4"></label>
							<label title="Damage Bonus">Damage bonus: <input type="number" value=0 name="attr_AtWill-flatdamage"> </label>
							<label title="Misc. Bonus to hit"> Misc Bonus to Hit <input type="number" value=0 name="attr_AtWill-MiscAttackBonus"></label>
							<label title="Other damage bonus"> Misc Flat Damage <input type="number" name="attr_AtWill-miscdamage" value=0></label>
							<input type="hidden" value=0 name="attr_AtWill-HitBonus-accessory">
							<label title="Crit dice"> Crit Dice <input type="text" value="1d4" class="sheet-diceInput" name="attr_AtWill-critdice"></label>
							<input type="hidden" value=0 name="attr_AtWill-abimod">
							<input type="hidden" value=0 name="attr_AtWill-critflat">
							<!-- <label title="Hit">Hit: <textarea name="attr_AtWill-Power-Hit"></textarea></label> -->
							<!-- <label title="Miss">Miss: <textarea name="attr_AtWill-Power-Miss"></textarea></label> -->
							<!-- <label title="Effect">Effect: <textarea name="attr_AtWill-Power-Effect2"></textarea></label> -->
						</div>
					</div>
				</div>
            </fieldset>
        </div>
		<!-- Encounters -->
        <div class='sheet-col'>
            <h3>Encounter Powers</h3>
			
			<div>
				Psionic? <input type="checkbox" class="sheet-arrow">
				<div class="sheet-body"> 
					<label title="PowerPoints">Power Points <input type="number" value=2 name="attr_PowerPoints"> / <input type="number" value=2 name="attr_PowerPoints_max"></label>
				</div>
			</div>
			<fieldset class="repeating_Encounters">
				<label title="Name" class="inlineLabel">Name<input name="attr_Encounter-Name" type="text"></label> <input type="checkbox" value=1 checked="true" name="attr_Encounter-display" class="sheet-arrow">
                <div class="sheet-body"> 
					<label title="Action">Action<select name="attr_Encounter-ActionType" class="sheet-ActionType">
						<option value="1">Standard</option>
						<option value="2">Move</option>
						<option value="3">Minor</option>
						<option value="4">Free</option>
						<option value="5">Immediate Interrupt</option>
						<option value="6">Immediate Reaction</option>
						<option value="7">No Action</option>
					</select></label> 
					<label title="Ready">Ready: <input name="attr_Encounter-Ready" type="checkbox" value=1></label>
					<label title="Range and Targets">Range and Targets: <input type="text" name="attr_Encounter-RangeTargets"></label> 
					<label title="Power Text">Power Text: <textarea name="attr_Encounter-Power-Text"></textarea></label>
					<div>
						Attack? <input type="checkbox" value=1 checked="true" name="attr_Encounter-IsAttack" class="sheet-arrow">
						<div class="sheet-body">
							<span class='sheet-AttSelect'>
								<select name="attr_Encounter-Ability">
									<option value="strmod">Strength</option>
									<option value="conmod">Constitution</option>
									<option value="dexmod">Dexterity</option>
									<option value="intmod">Intelligence</option>
									<option value="wismod">Wisdom</option>
									<option value="chamod">Charisma</option>
								</select> 
							</span> 
							vs. 
							<span class='sheet-DefSelect'>
								<select name='attr_Encounter-DefSelect'>
									<option value="AC">AC</option>
									<option value="Fort">Fortitude</option>
									<option value="Ref">Reflex</option>
									<option value="Will">Will</option>
								</select>
							</span> 
							<br>
							<select name="attr_Encounter-Accessory" class="sheet-AccesorySelect">
									<option value="wep1"> Weapon 1 </option>
									<option value="wep2"> Weapon 2 </option>
									<option value="wep3"> Weapon 3 </option>
									<option value="imp1"> Implement 1 </option>
									<option value="imp2"> Implement 2 </option>
							</select>
							<input type="number" value=0 name="attr_Encounter-HitBonus">
							<button type='roll' name="roll_Encounter-Attack" value='&{template:attack} {{name=@{Encounter-Name}}} {{RangeTargets=@{Encounter-RangeTargets}}}{{attack=[[1d20+@{Encounter-HitBonus}]]}} {{attackadv=[[1d20+@{Encounter-HitBonus}]]}} {{defense=@{Encounter-DefSelect}}}'> </button>
							<br> Damage roll: <button type='roll' name="roll_Encounter-Damage" value='&{template:damage} {{name=@{Encounter-Name}}} {{damage=[[@{Encounter-damagedice} + @{Encounter-flatdamage}]]}} {{dmgcrit=[[@{Encounter-critdice} + @{Encounter-critflat}]]}} {{dmgtype=@{Encounter-damagetype}}}'> </button>
							<label title="Damage Type"> Damage Type <input type="text" name="attr_Encounter-damagetype" class="sheet-diceInput" value="Fire"></label>
							<label title="Damage Dice"> Damage Dice <input type="text" name="attr_Encounter-damagedice" class="sheet-diceInput" value="1d4"></label>
							<label title="Damage Bonus">Damage bonus: <input type="number" value=0 name="attr_Encounter-flatdamage"> </label>
							<label title="Misc. Bonus to hit"> Misc Bonus to Hit <input type="number" value=0 name="attr_Encounter-MiscAttackBonus"></label>
							<label title="Other damage bonus"> Misc Flat Damage <input type="number" name="attr_Encounter-miscdamage" value=0></label>
							<input type="hidden" value=0 name="attr_Encounter-HitBonus-accessory">
							<label title="Crit dice"> Crit Dice <input type="text" value="1d4" class="sheet-diceInput" name="attr_Encounter-critdice"></label>
							<input type="hidden" value=0 name="attr_Encounter-abimod">
							<input type="hidden" value=0 name="attr_Encounter-critflat">
							<!-- <label title="Hit">Hit: <textarea name="attr_Encounter-Power-Hit"></textarea></label> -->
							<!-- <label title="Miss">Miss: <textarea name="attr_Encounter-Power-Miss"></textarea></label> -->
							<!-- <label title="Effect">Effect: <textarea name="attr_Encounter-Power-Effect2"></textarea></label> -->
						</div>
					</div>
				</div>
            </fieldset>
        </div>
		<!-- Dailies -->
        <div class='sheet-col'>
            <h3>Daily Powers</h3>
			<fieldset class="repeating_Dailies">
				<label title="Name" class="inlineLabel">Name<input name="attr_Daily-Name" type="text"></label> <input type="checkbox" value=1 checked="true" name="attr_Daily-display" class="sheet-arrow">
				<div class="sheet-body"> 
					<label title="Action">Action<select name="attr_Daily-ActionType" class="sheet-ActionType">
						<option value="1">Standard</option>
						<option value="2">Move</option>
						<option value="3">Minor</option>
						<option value="4">Free</option>
						<option value="5">Immediate Interrupt</option>
						<option value="6">Immediate Reaction</option>
						<option value="7">No Action</option>
					</select></label> 
					<label title="Ready">Ready: <input name="attr_Daily-Ready" type="checkbox" value=1></label>
					<label title="Range and Targets">Range and Targets: <input type="text" name="attr_Daily-RangeTargets"></label> 
					<label title="Power Text">Power Text: <textarea name="attr_Daily-Power-Text"></textarea></label>
					<div>
						Attack? <input type="checkbox" value=1 checked="true" name="attr_Daily-IsAttack" class="sheet-arrow">
						<div class="sheet-body">
							<span class='sheet-AttSelect'>
								<select name="attr_Daily-Ability">
									<option value="strmod">Strength</option>
									<option value="conmod">Constitution</option>
									<option value="dexmod">Dexterity</option>
									<option value="intmod">Intelligence</option>
									<option value="wismod">Wisdom</option>
									<option value="chamod">Charisma</option>
								</select> 
							</span> 
							vs. 
							<span class='sheet-DefSelect'>
								<select name='attr_Daily-DefSelect'>
									<option value="AC">AC</option>
									<option value="Fort">Fortitude</option>
									<option value="Ref">Reflex</option>
									<option value="Will">Will</option>
								</select>
							</span> 
							<br>
							<select name="attr_Daily-Accessory" class="sheet-AccesorySelect">
									<option value="wep1"> Weapon 1 </option>
									<option value="wep2"> Weapon 2 </option>
									<option value="wep3"> Weapon 3 </option>
									<option value="imp1"> Implement 1 </option>
									<option value="imp2"> Implement 2 </option>
							</select>
							<input type="number" value=0 name="attr_Daily-HitBonus">
							<button type='roll' name="roll_Daily-Attack" value='&{template:attack} {{name=@{Daily-Name}}} {{RangeTargets=@{Daily-RangeTargets}}}{{attack=[[1d20+@{Daily-HitBonus}]]}} {{attackadv=[[1d20+@{Daily-HitBonus}]]}} {{defense=@{Daily-DefSelect}}}'> </button>
							<br> Damage roll: <button type='roll' name="roll_Daily-Damage" value='&{template:damage} {{name=@{Daily-Name}}} {{damage=[[@{Daily-damagedice} + @{Daily-flatdamage}]]}} {{dmgcrit=[[@{Daily-critdice} + @{Daily-critflat}]]}} {{dmgtype=@{Daily-damagetype}}}'> </button>
							<label title="Damage Type"> Damage Type <input type="text" name="attr_Daily-damagetype" class="sheet-diceInput" value="Fire"></label>
							<label title="Damage Dice"> Damage Dice <input type="text" name="attr_Daily-damagedice" class="sheet-diceInput" value="1d4"></label>
							<label title="Damage Bonus">Damage bonus: <input type="number" value=0 name="attr_Daily-flatdamage"> </label>
							<label title="Misc. Bonus to hit"> Misc Bonus to Hit <input type="number" value=0 name="attr_Daily-MiscAttackBonus"></label>
							<label title="Other damage bonus"> Misc Flat Damage <input type="number" name="attr_Daily-miscdamage" value=0></label>
							<input type="hidden" value=0 name="attr_Daily-HitBonus-accessory">
							<label title="Crit dice"> Crit Dice <input type="text" value="1d4" class="sheet-diceInput" name="attr_Daily-critdice"></label>
							<input type="hidden" value=0 name="attr_Daily-abimod">
							<input type="hidden" value=0 name="attr_Daily-critflat">
							<!-- <label title="Hit">Hit: <textarea name="attr_Daily-Power-Hit"></textarea></label> -->
							<!-- <label title="Miss">Miss: <textarea name="attr_Daily-Power-Miss"></textarea></label> -->
							<!-- <label title="Effect">Effect: <textarea name="attr_Daily-Power-Effect2"></textarea></label> -->
						</div>
					</div>
				</div>
            </fieldset>
        </div>
    </div>
</div>

<!--Character Details-->
<div class="sheet-tab-content sheet-tab3">
    <div class="sheet-2colrow">
        <div class='sheet-col'>
            <h2>Race Features</h2>
            <fieldset class="repeating_RaceFeatures">
                <input type="text" name="attr_RaceFeature" />
            </fieldset>
        </div>
		
        <div class='sheet-col'>
            <h2>Class Features</h2>
            <fieldset class="repeating_ClassFeatures">
                <input type="text" name="attr_ClassFeature" />
            </fieldset>
        </div>
    </div>

    <div class="sheet-2colrow">
        <div class='sheet-col'>
            <h2>Feats</h2>
            <fieldset class="repeating_Feats">
                <input type="text" name="attr_Feat" />
            </fieldset>
        </div>

        <div class='sheet-col'>
            <h2>Flaws and Longterm Conditions</h2>
			<fieldset class="repeating_Flaws-LongtermConditions">
                <input type="text" name="attr_Flaw-LongtermCondition">
            </fieldset>
        </div>
    </div>

    <div class="sheet-2colrow">
        <div class='sheet-col'>
            <h2>Backstory</h2>
            <textarea name="attr_Backstory"></textarea>
        </div>

        <div class='sheet-col'>
            <h2>Personality</h2>
            <textarea name="attr_Personality"></textarea>
        </div>
    </div>
</div>

<!--Equipment-->
<div class="sheet-tab-content sheet-tab4">
    <h1>On Person</h1>
		<h2>Combat Items</h2>
		<!-- Weapons -->
		<div class='sheet-3colrow'>
			<!-- Weapon 1 -->
			<div class='sheet-col'>
				<h3>Weapon 1</h3>
				<input type="text" name="attr_wep1-Name" class="sheet-Item"> Name <br>
				<input type="number" name="attr_wep1-Attack" value='2' /> Weapon Proficiency <br>
				<div class='sheet-wepDamSelect'>
					<select name="attr_wep1-Damage">
							<option value="1d4">1d4 </option>
							<option value="1d6">1d6 </option>
							<option value="1d8">1d8 </option>
							<option value="1d10">1d10</option>
							<option value="1d12">1d12</option>
							<option value="2d4">2d4 </option>
							<option value="2d6">2d6 </option>
					</select> Weapon Damage <br>
					<input type="checkbox" name="attr_wep1-Brutal" value="r<"> Brutal <input type="number" name="attr_wep1-BrutN" min=1 max=2 value=1> <input type="checkbox" name="attr_wep1-HighCrit" value="true"> High Crit
				</div>
			</div>
			<!-- Weapon 2 -->
			<div class='sheet-col'>
				<h3>Weapon 2</h3>
				<input type="text" name="attr_wep2-Name" class="sheet-Item"> Name <br>
				<input type="number" name="attr_wep2-Attack" value='2' /> Weapon Proficiency <br>
				<div class='sheet-wepDamSelect'>
					<select name="attr_wep2-Damage">
							<option value="1d4">1d4 </option>
							<option value="1d6">1d6 </option>
							<option value="1d8">1d8 </option>
							<option value="1d10">1d10</option>
							<option value="1d12">1d12</option>
							<option value="2d4">2d4 </option>
							<option value="2d6">2d6 </option>
					</select> Weapon Damage <br>
					<input type="checkbox" name="attr_wep2-Brutal" value="r<"> Brutal <input type="number" name="attr_wep2-BrutN" min=1 max=2 value=1> <input type="checkbox" name="attr_wep2-HighCrit" value="true"> High Crit
				</div>
			</div>
			<!-- Weapon 3 -->
			<div class='sheet-col'>
				<h3>Weapon 3</h3>
				<input type="text" name="attr_wep3-Name" class="sheet-Item"> Name <br>
				<input type="number" name="attr_wep3-Attack" value='2' /> Weapon Proficiency <br>
				<div class='sheet-wepDamSelect'>
					<select name="attr_wep3-Damage">
							<option value="1d4">1d4 </option>
							<option value="1d6">1d6 </option>
							<option value="1d8">1d8 </option>
							<option value="1d10">1d10</option>
							<option value="1d12">1d12</option>
							<option value="2d4">2d4 </option>
							<option value="2d6">2d6 </option>
					</select> Weapon Damage <br>
					<input type="checkbox" name="attr_wep3-Brutal" value="r<"> Brutal <input type="number" name="attr_wep3-BrutN" min=1 max=2 value=1> <input type="checkbox" name="attr_wep3-HighCrit" value="true"> High Crit
				</div>
			</div>
		</div>
		<!-- Armor and Implements -->
		<div class='sheet-3colrow'>
			<!-- Armor -->
			<div class="sheet-col">
				<h3>Armor</h3>
				<input type="text" name="attr_ArmorItem-Name" value="Cloth" class="sheet-Item"> Name<br>
				<span class='sheet-AttSelect-AC'>
						<select name="attr_AC-Att">
							<option value=0>None (Heavy Armor)</option>
							<option value=1>Strength</option>
							<option value=2>Constitution</option>
							<option value=3>Dexterity</option>
							<option value=4>Intelligence</option>
							<option value=5>Wisdom</option>
							<option value=6>Charisma</option>
						</select> Attribute
				</span>
				<label title="Armor Bonus"> Armor Bonus <input type="number" name="attr_AC-Armor" value=0></label>
			</div>
			<!-- Implement 1 -->
			<div class="sheet-col">
				<h3>Implement 1</h3>
				<input type="text" name="attr_imp1-Name" class="sheet-Item"> Name <br>
				<input type="number" name="attr_imp1-Attack" value=0> Attack Bonus <br>
				<input type="hidden" name="attr_imp1-Damage" value="1d8">
			</div>
			<!-- Implement 2 -->
			<div class="sheet-col">
				<h3>Implement 2</h3>
				<input type="text" name="attr_imp2-Name" class="sheet-Item"> Name <br>
				<input type="number" name="attr_imp2-Attack" value=0> Attack Bonus <br>
				<input type="hidden" name="attr_imp2-Damage" value="1d8">
			</div>
		</div>
		<div class="sheet-3colrow">
			<!-- Worn -->
			<div class="sheet-col">
				<h2>Worn</h2>
				<input type="text" name="attr_HeadItem" value="A simple cowl"> Head<br>
				<input type="text" name="attr_NeckItem" value="Nothing"> Neck<br>
				<input type="text" name="attr_ArmsItem" value="Sleevies"> Arms<br>
				<input type="text" name="attr_HandsItem" value="Leather gloves"> Hands<br>
				<input type="text" name="attr_WaistItem" value="Belt with pouches"> Waist<br>
				<input type="text" name="attr_FeetItem" value="Worn shoes"> Feet<br>
			</div>
			<!-- Backpack -->
			<div class="sheet-col">
				<h2>Backpack</h2>
				<label title="Backpack Space Used"> <input type="number" name="attr_BackpackSpace" value=0> / <input type="number" name="attr_BackpackSpace_max" value=75> Space Used</label>
				<br>
				<fieldset class="repeating_BackpackItems">
					<input type="text" name="attr_BackpackItem" class="sheet-Item"> <input type="number" name="attr_BackpackItem-Space" value=0 min=0>
				</fieldset>
			</div>
			<!-- Other Places -->
			<div class="sheet-col">
				<h2>Other Places</h2>
				<fieldset class="repeating_OnPersonItems">
					<input type="text" name="attr_OnPersonItem" class="sheet-Item"> <input type="number" name="attr_OnPersonItemSpace">
				</fieldset>
			</div>
		</div>
    <h1>Left at Home</h1>
		<textarea name="attr_ItemsAtHome"></textarea>
</div>

<!--Roll Templates-->
<div class="sheet-rolltemplates">
	<rolltemplate class="sheet-rolltemplate-attack">
		<table>
			<tr><th>{{name}}</th></tr>
			<tr><td class="sheet-subheader">{{RangeTargets}}</td></tr>
			<tr class="sheet-arrow-container"><td><div class="arrow-right"></div></td></tr>
			<tr class="sheet-rowcolor"><td><span class="sheet-tcat">Attack: </span>{{attack}} | {{attackadv}} vs {{defense}}</td></tr>
		</table>
	</rolltemplate>
	
	<rolltemplate class="sheet-rolltemplate-damage">
		<table>
			<tr><th>{{name}}</th></tr>
			<tr>
				<td>
					 <span class="sheet-tcat">Damage: </span>{{damage}} 
					 <span class="sheet-tcat">Crit: </span>{{dmgcrit}}
				</td>
			</tr>
			<tr>
				<td>
					<span class="sheet-tcat">Type: </span>{{dmgtype}}
				</td>
			</tr>
		</table>
	</rolltemplate>
	
	<rolltemplate class="sheet-rolltemplate-skillcheck">
		<table>
			<tr><th>{{name}}</th></tr>
			<tr><td class="sheet-subheader">{{Trained}}</td></tr>
			<tr class="sheet-arrow-container"><td><div class="arrow-right"></div></td></tr>
			<tr class="sheet-rowcolor"><td><span class="sheet-tcat">Check: </span>{{check}} | {{checkadv}}</td></tr>
		</table>
	</rolltemplate>
</div>

<!-- WORKERS -->
<script type="text/worker">
	on("change:hp_max", function() {
		getAttrs(["HP_max"], function(values){
			setAttrs({
				"HP-Bloodied": Math.floor(values.HP_max/2),
				"HP-surgeValue": Math.floor(values.HP_max/4)
			});
		});
	});
	
	on("change:strength", function() {
		getAttrs(["Strength"], function(values){
			setAttrs({
				strmod: Math.floor(values.Strength/2-5)
			});
		});
	});

	on("change:constitution", function() {
		getAttrs(["Constitution"], function(values){
			setAttrs({
				conmod: Math.floor(values.Constitution/2-5)
			});
		});
	});

	on("change:dexterity", function() {
		getAttrs(["Dexterity"], function(values){
			setAttrs({
				dexmod: Math.floor(values.Dexterity/2-5)
			});
		});
	});

	on("change:intelligence", function() {
		getAttrs(["Intelligence"], function(values){
			setAttrs({
				intmod: Math.floor(values.Intelligence/2-5)
			});
		});
	});

	on("change:wisdom", function() {
		getAttrs(["Wisdom"], function(values){
			setAttrs({
				wismod: Math.floor(values.Wisdom/2-5)
			});
		});
	});

	on("change:charisma", function() {
		getAttrs(["Charisma"], function(values){
			setAttrs({
				chamod: Math.floor(values.Charisma/2-5)
			});
		});
	});
	
	on("change:ac-att change:strmod change:conmod change:dexmod change:intmod change:wismod change:chamod change:level-half change:quest change:ac-armor change:ac-misc", function() {
		getAttrs(["AC-Att","strmod","conmod","dexmod","intmod", "wismod", "chamod","level-half","Quest", "AC-Armor", "AC-Misc"], function(values) {
			var abimod = 0;
			switch(parseInt(values['AC-Att'])) {
				case 0:
					abimod = 0;
					break;
				case 1:
					abimod = values.strmod;
					break;
				case 2:
					abimod = values.conmod;
					break;
				case 3:
					abimod = values.dexmod;
					break;
				case 4:
					abimod = values.intmod;
					break;
				case 5:
					abimod = values.wismod;
					break;
				case 6:
					abimod = values.chamod;
					break;
			}
			var finalattr = (10 + parseInt(abimod) + parseInt(values.Quest) + parseInt(values['level-half']) + parseInt(values['AC-Armor']) + parseInt(values['AC-Misc']));
			setAttrs({
				AC: finalattr
			});
		});
	});
	
	on("change:strmod change:conmod change:level-half change:quest change:fort-misc", function() {
		getAttrs(["strmod","conmod","level-half","Quest", "Fort-Misc"], function(values) {
			var finalattr = (10 + Math.max(parseInt(values.strmod), parseInt(values.conmod)) + parseInt(values.Quest) + parseInt(values['level-half']) + parseInt(values['Fort-Misc']));
			setAttrs({
				Fort: finalattr
			});
		});
	});
	
	on("change:dexmod change:intmod change:level-half change:quest change:ref-misc", function() {
		getAttrs(["dexmod","intmod","level-half","Quest", "Ref-Misc"], function(values) {
			var finalattr = (10 + Math.max(parseInt(values.dexmod), parseInt(values.intmod)) + parseInt(values.Quest) + parseInt(values['level-half']) + parseInt(values['Ref-Misc']));
			setAttrs({
				Ref: finalattr
			});
		});
	});
	
	on("change:wismod change:chamod change:level-half change:quest change:will-misc", function() {
		getAttrs(["wismod","chamod","level-half","Quest", "Will-Misc"], function(values) {
			var finalattr = (10 + Math.max(parseInt(values.wismod), parseInt(values.chamod)) + parseInt(values.Quest) + parseInt(values['level-half']) + parseInt(values['Will-Misc']));
			setAttrs({
				Will: finalattr
			});
		});
	});
	
	on("change:strikerdice", function() {
		getAttrs(["strikerdice"], function(values) {
			var numdice = parseInt(values.strikerdice);
			var size = 4;
			if (numdice < 10) {
				size = parseInt(values.strikerdice.substring(2));
			}
			else {
				size = parseInt(values.strikerdice.substring(3));
			}
			var finalattr = (numdice * size);
			setAttrs({
				strikercrit: finalattr
			});
		});
	});
	
	
	on("change:repeating_atwills:atwill-accessory", function(eventInfo) {
		var accessory = eventInfo.newValue;
		var attack = (accessory + "-Attack");
		var damage = (accessory + "-Damage");
		var brutal = (accessory + "-Brutal");
		var brutN = (accessory + "-BrutN");
		var crit = (accessory + "-HighCrit");
		if (accessory.substring(0,3) == "wep") {
			getAttrs([attack,damage,brutal,brutN,crit,"level","quest"], function(values) {
				var damagedice = (values[damage]);
				if (values[brutal] == "r<") {
					damagedice = (damagedice + values[brutal] + values[brutN]);
				}
				var critdice = (values['quest'] + "d6");
				if (values[crit] == "true"){
					critdice = (critdice + ' + ' + (parseInt(damagedice.substring(0,1)) * Math.ceil(parseInt(values["level"])/5)) + damagedice.substring(1));
				}	
				setAttrs({
					"repeating_AtWills_AtWill-HitBonus-accessory": parseInt(values[attack]),
					"repeating_AtWills_AtWill-damagedice": damagedice,
					"repeating_AtWills_AtWill-critdice": critdice
				});
			});
		}
		else {
			getAttrs([attack,damage,"quest"], function(values) {
				var critdice = (values['quest'] + "d6");
				setAttrs({
					"repeating_AtWills_AtWill-HitBonus-accessory": parseInt(values[attack]),
					"repeating_AtWills_AtWill-damagedice": values[damage],
					"repeating_AtWills_AtWill-critdice": values[critdice]
				});
			});
		}
	});
	
	on("change:repeating_atwills:atwill-ability change:repeating_atwills:atwill-display", function(eventInfo) {
		getAttrs(["repeating_AtWills_AtWill-Ability"], function(values) {
			var modname = values["repeating_AtWills_AtWill-Ability"];
			getAttrs([modname], function(values){
				setAttrs({
					"repeating_AtWills_AtWill-abimod": parseInt(values[modname])
				});
			});
		});
	});
	
	on("change:repeating_atwills:atwill-miscattackbonus change:repeating_atwills:atwill-abimod change:repeating_atwills:atwill-hitbonus-accessory change:repeating_atwills:atwill-display", function () {
		getAttrs(["repeating_atwills_AtWill-MiscAttackBonus", "repeating_atwills_AtWill-abimod", "repeating_atwills_AtWill-HitBonus-accessory", "level-half", "Quest"], function(values){
			var finalattr = (parseInt(values["repeating_atwills_AtWill-MiscAttackBonus"]) + parseInt(values["repeating_atwills_AtWill-abimod"]) + parseInt(values["repeating_atwills_AtWill-HitBonus-accessory"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			setAttrs({
				"repeating_AtWills_AtWill-HitBonus": finalattr
			});
		});
	});
	
	on("change:repeating_atwills:atwill-miscdamage change:repeating_atwills:atwill-abimod change:repeating_atwills:atwill-display", function () {
		getAttrs(["repeating_AtWills_AtWill-miscdamage", "repeating_AtWills_AtWill-abimod", "level-half", "Quest"], function (values){
			var finalattr = (parseInt(values["repeating_AtWills_AtWill-abimod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]) + parseInt(values["repeating_AtWills_AtWill-miscdamage"]));
			setAttrs({
				"repeating_AtWills_AtWill-flatdamage": finalattr
			});
		});
	});
	
	on("change:repeating_atwills:atwill-damagedice change:repeating_atwills:atwill-flatdamage", function () {
		getAttrs(["repeating_AtWills_AtWill-damagedice", "repeating_AtWills_AtWill-flatdamage"], function (values){
			var numdice = parseInt(values["repeating_AtWills_AtWill-damagedice"]);
			var size = 4;
			if (numdice<10) {
				size = parseInt(values["repeating_AtWills_AtWill-damagedice"].substring(2));
			}
			else {
				size = parseInt(values["repeating_AtWills_AtWill-damagedice"].substring(3));
			}
			var finalattr = (numdice * size + parseInt(values["repeating_AtWills_AtWill-flatdamage"]));
			setAttrs({
				"repeating_AtWills_AtWill-critflat": finalattr
			});
		});
	});
	
	on("change:repeating_encounters:encounter-accessory", function(eventinfo) {
		var accessory = eventinfo.newValue;
		var attack = (accessory + "-Attack");
		var damage = (accessory + "-Damage");
		var brutal = (accessory + "-Brutal");
		var brutN = (accessory + "-BrutN");
		var crit = (accessory + "-HighCrit");
		if (accessory.substring(0,3) == "wep") {
			getAttrs([attack,damage,brutal,brutN,crit,"level","quest"], function(values) {
				var damagedice = (values[damage]);
				if (values[brutal] == "r<") {
					damagedice = (damagedice + values[brutal] + values[brutN]);
				}
				var critdice = (values['quest'] + "d6");
				if (values[crit] == "true"){
					critdice = (critdice + ' + ' + (parseInt(damagedice.substring(0,1)) * Math.ceil(parseInt(values["level"])/5)) + damagedice.substring(1));
				}	
				setAttrs({
					"repeating_Encounters_Encounter-HitBonus-accessory": parseInt(values[attack]),
					"repeating_Encounters_Encounter-damagedice": damagedice,
					"repeating_Encounters_Encounter-critdice": critdice
				});
			});
		}
		else {
			getAttrs([attack,damage,"quest"], function(values) {
				var critdice = (values['quest'] + "d6");
				setAttrs({
					"repeating_Encounters_Encounter-HitBonus-accessory": parseInt(values[attack]),
					"repeating_Encounters_Encounter-damagedice": values[damage],
					"repeating_Encounters_Encounter-critdice": values[critdice]
				});
			});
		}
	});
	
	on("change:repeating_encounters:encounter-ability change:repeating_encounters:encounter-display", function(eventInfo) {
		getAttrs(["repeating_Encounters_Encounter-Ability"], function(values) {
			var modname = values["repeating_encounters_Encounter-Ability"];
			getAttrs([modname], function(values){
				setAttrs({
					"repeating_Encounters_Encounter-abimod": parseInt(values[modname])
				});
			});
		});
	});
	
	on("change:repeating_encounters:encounter-miscattackbonus change:repeating_encounters:encounter-abimod change:repeating_encounters:encounter-hitbonus-accessory change:repeating_encounters:encounter-display", function () {
		getAttrs(["repeating_encounters_Encounter-MiscAttackBonus", "repeating_encounters_Encounter-abimod", "repeating_encounters_Encounter-HitBonus-accessory", "level-half", "Quest"], function(values){
			var finalattr = (parseInt(values["repeating_encounters_Encounter-MiscAttackBonus"]) + parseInt(values["repeating_encounters_Encounter-abimod"]) + parseInt(values["repeating_encounters_Encounter-HitBonus-accessory"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			setAttrs({
				"repeating_Encounters_Encounter-HitBonus": finalattr
			});
		});
	});
	
	on("change:repeating_encounters:encounter-miscdamage change:repeating_encounters:encounter-abimod change:repeating_encounters:encounter-display", function () {
		getAttrs(["repeating_Encounters_Encounter-miscdamage", "repeating_Encounters_Encounter-abimod", "level-half", "Quest"], function (values){
			var finalattr = (parseInt(values["repeating_Encounters_Encounter-abimod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]) + parseInt(values["repeating_Encounters_Encounter-miscdamage"]));
			setAttrs({
				"repeating_Encounters_Encounter-flatdamage": finalattr
			});
		});
	});
	
	on("change:repeating_encounters:encounter-damagedice change:repeating_encounters:encounter-flatdamage", function () {
		getAttrs(["repeating_Encounters_Encounter-damagedice", "repeating_Encounters_Encounter-flatdamage"], function (values){
			var numdice = parseInt(values["repeating_Encounters_Encounter-damagedice"]);
			var size = 4;
			if (numdice<10) {
				size = parseInt(values["repeating_Encounters_Encounter-damagedice"].substring(2));
			}
			else {
				size = parseInt(values["repeating_Encounters_Encounter-damagedice"].substring(3));
			}
			var finalattr = (numdice * size + parseInt(values["repeating_Encounters_Encounter-flatdamage"]));
			setAttrs({
				"repeating_Encounters_Encounter-critflat": finalattr
			});
		});
	});
	
	on("change:repeating_dailies:daily-accessory", function(eventinfo) {
		var accessory = eventinfo.newValue;
		var attack = (accessory + "-Attack");
		var damage = (accessory + "-Damage");
		var brutal = (accessory + "-Brutal");
		var brutN = (accessory + "-BrutN");
		var crit = (accessory + "-HighCrit");
		if (accessory.substring(0,3) == "wep") {
			getAttrs([attack,damage,brutal,brutN,crit,"level","quest"], function(values) {
				var damagedice = (values[damage]);
				if (values[brutal] == "r<") {
					damagedice = (damagedice + values[brutal] + values[brutN]);
				}
				var critdice = (values['quest'] + "d6");
				if (values[crit] == "true"){
					critdice = (critdice + ' + ' + (parseInt(damagedice.substring(0,1)) * Math.ceil(parseInt(values["level"])/5)) + damagedice.substring(1));
				}	
				setAttrs({
					"repeating_Dailies_Daily-HitBonus-accessory": parseInt(values[attack]),
					"repeating_Dailies_Daily-damagedice": damagedice,
					"repeating_Dailies_Daily-critdice": critdice
				});
			});
		}
		else {
			getAttrs([attack,damage,"quest"], function(values) {
				var critdice = (values['quest'] + "d6");
				setAttrs({
					"repeating_Dailies_Daily-HitBonus-accessory": parseInt(values[attack]),
					"repeating_Dailies_Daily-damagedice": values[damage],
					"repeating_Dailies_Daily-critdice": values[critdice]
				});
			});
		}
	});
	
	on("change:repeating_dailies:daily-ability change:repeating_dailies:daily-display", function(eventInfo) {
		getAttrs(["repeating_Dailies_Daily-Ability"], function(values) {
			var modname = values["repeating_Dailies_Daily-Ability"];
			getAttrs([modname], function(values){
				setAttrs({
					"repeating_Dailies_Daily-abimod": parseInt(values[modname])
				});
			});
		});
	});
	
	on("change:repeating_dailies:daily-miscattackbonus change:repeating_dailies:daily-abimod change:repeating_dailies:daily-hitbonus-accessory change:repeating_dailies:daily-display", function () {
		getAttrs(["repeating_dailies_Daily-MiscAttackBonus", "repeating_dailies_Daily-abimod", "repeating_dailies_Daily-HitBonus-accessory", "level-half", "Quest"], function(values){
			var finalattr = (parseInt(values["repeating_dailies_Daily-MiscAttackBonus"]) + parseInt(values["repeating_dailies_Daily-abimod"]) + parseInt(values["repeating_dailies_Daily-HitBonus-accessory"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			setAttrs({
				"repeating_Dailies_Daily-HitBonus": finalattr
			});
		});
	});
	
	on("change:repeating_dailies:daily-miscdamage change:repeating_dailies:daily-abimod change:repeating_dailies:daily-display", function () {
		getAttrs(["repeating_Dailies_Daily-miscdamage", "repeating_Dailies_Daily-abimod", "level-half", "Quest"], function (values){
			var finalattr = (parseInt(values["repeating_Dailies_Daily-abimod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]) + parseInt(values["repeating_Dailies_Daily-miscdamage"]));
			setAttrs({
				"repeating_Dailies_Daily-flatdamage": finalattr
			});
		});
	});
	
	on("change:repeating_dailies:daily-damagedice change:repeating_dailies:daily-flatdamage", function () {
		getAttrs(["repeating_Dailies_Daily-damagedice", "repeating_Dailies_Daily-flatdamage"], function (values){
			var numdice = parseInt(values["repeating_Dailies_Daily-damagedice"]);
			var size = 4;
			if (numdice<10) {
				size = parseInt(values["repeating_Dailies_Daily-damagedice"].substring(2));
			}
			else {
				size = parseInt(values["repeating_Dailies_Daily-damagedice"].substring(3));
			}
			var finalattr = (numdice * size + parseInt(values["repeating_Dailies_Daily-flatdamage"]));
			setAttrs({
				"repeating_Dailies_Daily-critflat": finalattr
			});
		});
	});
	
	on("change:repeating_backpackitems", function() {
       getSectionIDs("BackpackItems", function(idarray) {
            var fieldNames  = [];
            for(var i=0; i < idarray.length; i++) {
				fieldNames.push("repeating_BackpackItems_" + idarray[i] + "_BackpackItem-Space");
            }
            getAttrs(fieldNames, function(value){
				var spaceUsed = 0;
				for(var i=0; i < idarray.length; i++) {
					spaceUsed = spaceUsed + (parseInt(value["repeating_BackpackItems_" + idarray[i] + "_BackpackItem-Space"]));
				}
				setAttrs({
                    BackpackSpace: spaceUsed
                });
            });
        });
    });
		
	on("change:acrobatics-train change:acrobatics-miscbonus change:dexmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Acrobatics-Train", "Acrobatics-MiscBonus", "dexmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Acrobatics-Train"]) + parseInt(values["Acrobatics-MiscBonus"]) + parseInt(values["dexmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Acrobatics-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Acrobatics: finalattr
			});
		});
	});

	on("change:appeal-train change:appeal-miscbonus change:chamod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Appeal-Train", "Appeal-MiscBonus", "chamod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Appeal-Train"]) + parseInt(values["Appeal-MiscBonus"]) + parseInt(values["chamod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Appeal-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Appeal: finalattr
			});
		});
	});

	on("change:arcana-train change:arcana-miscbonus change:intmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Arcana-Train", "Arcana-MiscBonus", "intmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Arcana-Train"]) + parseInt(values["Arcana-MiscBonus"]) + parseInt(values["intmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Arcana-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Arcana: finalattr
			});
		});
	});

	on("change:athletics-train change:athletics-miscbonus change:strmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Athletics-Train", "Athletics-MiscBonus", "strmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Athletics-Train"]) + parseInt(values["Athletics-MiscBonus"]) + parseInt(values["strmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Athletics-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Athletics: finalattr
			});
		});
	});

	on("change:debate-train change:debate-miscbonus change:intmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Debate-Train", "Debate-MiscBonus", "intmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Debate-Train"]) + parseInt(values["Debate-MiscBonus"]) + parseInt(values["intmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Debate-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Debate: finalattr
			});
		});
	});

	on("change:endurance-train change:endurance-miscbonus change:conmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Endurance-Train", "Endurance-MiscBonus", "conmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Endurance-Train"]) + parseInt(values["Endurance-MiscBonus"]) + parseInt(values["conmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Endurance-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Endurance: finalattr
			});
		});
	});

	on("change:handleanimal-train change:handleanimal-miscbonus change:wismod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["HandleAnimal-Train", "HandleAnimal-MiscBonus", "wismod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["HandleAnimal-Train"]) + parseInt(values["HandleAnimal-MiscBonus"]) + parseInt(values["wismod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["HandleAnimal-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				HandleAnimal: finalattr
			});
		});
	});

	on("change:insight-train change:insight-miscbonus change:wismod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Insight-Train", "Insight-MiscBonus", "wismod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Insight-Train"]) + parseInt(values["Insight-MiscBonus"]) + parseInt(values["wismod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Insight-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Insight: finalattr
			});
		});
	});

	on("change:impress-train change:impress-miscbonus change:chamod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened sheet:opened", function() {
		getAttrs(["Impress-Train", "Impress-MiscBonus", "chamod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Impress-Train"]) + parseInt(values["Impress-MiscBonus"]) + parseInt(values["chamod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Impress-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Impress: finalattr
			});
		});
	});

	on("change:medicine-train change:medicine-miscbonus change:wismod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Medicine-Train", "Medicine-MiscBonus", "wismod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Medicine-Train"]) + parseInt(values["Medicine-MiscBonus"]) + parseInt(values["wismod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Medicine-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Medicine: finalattr
			});
		});
	});

	on("change:perception-train change:perception-miscbonus change:wismod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Perception-Train", "Perception-MiscBonus", "wismod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Perception-Train"]) + parseInt(values["Perception-MiscBonus"]) + parseInt(values["wismod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Perception-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Perception: finalattr
			});
		});
	});

	on("change:repair-train change:repair-miscbonus change:intmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Repair-Train", "Repair-MiscBonus", "intmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Repair-Train"]) + parseInt(values["Repair-MiscBonus"]) + parseInt(values["intmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Repair-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Repair: finalattr
			});
		});
	});

	on("change:research-train change:research-miscbonus change:intmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Research-Train", "Research-MiscBonus", "intmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Research-Train"]) + parseInt(values["Research-MiscBonus"]) + parseInt(values["intmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Research-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Research: finalattr
			});
		});
	});

	on("change:sleightofhand-train change:sleightofhand-miscbonus change:dexmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["SleightofHand-Train", "SleightofHand-MiscBonus", "dexmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["SleightofHand-Train"]) + parseInt(values["SleightofHand-MiscBonus"]) + parseInt(values["dexmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["SleightofHand-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				SleightofHand: finalattr
			});
		});
	});

	on("change:stealth-train change:stealth-miscbonus change:dexmod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Stealth-Train", "Stealth-MiscBonus", "dexmod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Stealth-Train"]) + parseInt(values["Stealth-MiscBonus"]) + parseInt(values["dexmod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Stealth-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Stealth: finalattr
			});
		});
	});

	on("change:socialize-train change:socialize-miscbonus change:chamod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Socialize-Train", "Socialize-MiscBonus", "chamod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Socialize-Train"]) + parseInt(values["Socialize-MiscBonus"]) + parseInt(values["chamod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Socialize-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Socialize: finalattr
			});
		});
	});

	on("change:survival-train change:survival-miscbonus change:wismod change:level-half change:quest change:jackofalltrades change:bardjack sheet:opened", function() {
		getAttrs(["Survival-Train", "Survival-MiscBonus", "wismod", "level-half", "Quest", "JackOfAllTrades", "BardJack",], function(values) {
			var finalattr = (parseInt(values["Survival-Train"]) + parseInt(values["Survival-MiscBonus"]) + parseInt(values["wismod"]) + parseInt(values["level-half"]) + parseInt(values["Quest"]));
			if (parseInt(values["Survival-Train"]) == 0) {
				finalattr = (finalattr + parseInt(values["JackOfAllTrades"]) + parseInt(values["BardJack"]));
			}
			if (finalattr >0) {
				finalattr = ("+" + finalattr);
			}
			setAttrs({
				Survival: finalattr
			});
		});
	});


	
	
	on("change:acrobatics-train", function() {
		getAttrs(["Acrobatics-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Acrobatics-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Acrobatics-Trained": finalattr
			});
		});
	});

	on("change:appeal-train", function() {
		getAttrs(["Appeal-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Appeal-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Appeal-Trained": finalattr
			});
		});
	});

	on("change:arcana-train", function() {
		getAttrs(["Arcana-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Arcana-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Arcana-Trained": finalattr
			});
		});
	});

	on("change:athletics-train", function() {
		getAttrs(["Athletics-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Athletics-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Athletics-Trained": finalattr
			});
		});
	});

	on("change:debate-train", function() {
		getAttrs(["Debate-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Debate-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Debate-Trained": finalattr
			});
		});
	});

	on("change:endurance-train", function() {
		getAttrs(["Endurance-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Endurance-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Endurance-Trained": finalattr
			});
		});
	});

	on("change:handleanimal-train", function() {
		getAttrs(["HandleAnimal-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["HandleAnimal-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"HandleAnimal-Trained": finalattr
			});
		});
	});

	on("change:insight-train", function() {
		getAttrs(["Insight-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Insight-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Insight-Trained": finalattr
			});
		});
	});

	on("change:impress-train", function() {
		getAttrs(["Impress-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Impress-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Impress-Trained": finalattr
			});
		});
	});

	on("change:medicine-train", function() {
		getAttrs(["Medicine-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Medicine-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Medicine-Trained": finalattr
			});
		});
	});

	on("change:perception-train", function() {
		getAttrs(["Perception-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Perception-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Perception-Trained": finalattr
			});
		});
	});

	on("change:repair-train", function() {
		getAttrs(["Repair-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Repair-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Repair-Trained": finalattr
			});
		});
	});

	on("change:research-train", function() {
		getAttrs(["Research-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Research-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Research-Trained": finalattr
			});
		});
	});

	on("change:sleightofhand-train", function() {
		getAttrs(["SleightofHand-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["SleightofHand-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"SleightofHand-Trained": finalattr
			});
		});
	});

	on("change:stealth-train", function() {
		getAttrs(["Stealth-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Stealth-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Stealth-Trained": finalattr
			});
		});
	});

	on("change:socialize-train", function() {
		getAttrs(["Socialize-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Socialize-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Socialize-Trained": finalattr
			});
		});
	});

	on("change:survival-train", function() {
		getAttrs(["Survival-Train"], function(values) {
			var finalattr = "Untrained";
			if (values["Survival-Train"] >0) {
				finalattr = ("Trained");
			}
			setAttrs({
				"Survival-Trained": finalattr
			});
		});
	});
</script>