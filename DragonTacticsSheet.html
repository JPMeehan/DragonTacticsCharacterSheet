<input type="hidden" name="attr_Version" value="3.4.0" />
<div class="main">
    <div class="header section">
        <h1>Dragon Tactics Character Sheet</h1>
        <input type="text" name="attr_character_name" placeholder="Name" />
    </div>
    <div class="common section">
        <h2>Basic Info</h2>
        <input type="text" name="attr_Gender" placeholder="Gender" class="gender" />
        <input type="text" name="attr_Race" placeholder="Race" class="race" />
        <input type="checkbox" class="arrow" />
        <div class="body">
            <input type="text" name="attr_Height" placeholder="Height" class="bio" />
            <input type="text" name="attr_Weight" placeholder="Weight" class="bio" />
        </div>
        <input type="text" name="attr_Class" placeholder="Class" /> <input type="number" name="attr_level" value="1"
            min="1" max="30" />
        <label class="inlineLabel">
            Quest Bonus <input type="number" name="attr_Quest" value="0" />
        </label>
        <input type="hidden" name="attr_actionpoints" value="1" />
        <input type="hidden" name="attr_actionpoints_max" value="1" />
    </div>
    <div class="abilities section">
        <h2>Attributes</h2>
        <div>
            <input type="number" name="attr_Strength" value="10" />
            <input name="attr_strmod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Strength Check}} {{check=[[1d20 + @{strmod} + @{Quest}]]}} {{checkadv=[[1d20 + @{strmod} + @{Quest}]]}}"
                name="roll_StrengthCheck">Strength</button>
            <input type="checkbox" value="1" name="attr_StrSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <span name="attr_Athletics" value="+0" style="font-size:140%;"></span>
                <button type="roll" class="skillcheckroll"
                    value="&{template:skillcheck} {{name=Athletics Check}} {{Trained=@{Athletics-Trained}}} {{check=[[1d20 @{Athletics}]]}} {{checkadv=[[1d20 @{Athletics}]]}}"
                    name="roll_AthleticsCheck">Athletics</button>
                <input type="checkbox" value="1" name="attr_AthDets" checked="true" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Athletics-Train" class="Training">
                        <option value="0" selected>Untrained</option>
                        <option value="2">Adept</option>
                        <option value="4">Trained</option>
                        <option value="6">Experienced</option>
                        <option value="8">Expert</option>
                        <option value="10">Master</option>
                    </select>
                    <label>
                        Misc. Bonus
                        <input type="number" name="attr_Athletics-MiscBonus" value="0" /></label>
                    <input name="Athletics-Trained" type="hidden" value="Untrained" />
                </div>
            </div>
        </div>
        <div>
            <input type="number" name="attr_Constitution" value="10" />
            <input name="attr_conmod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Constitution Check}} {{check=[[1d20 + @{conmod} + @{Quest}]]}} {{checkadv=[[1d20 + @{conmod} + @{Quest}]]}}"
                name="roll_ConstitutionCheck">Constitution</button>
            <input type="checkbox" value="1" name="attr_ConSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <span name="attr_Endurance" value="+0" style="font-size:140%;"></span>
                <button type="roll" class="skillcheckroll"
                    value="&{template:skillcheck} {{name=Endurance Check}} {{Trained=@{Endurance-Trained}}} {{check=[[1d20 @{Endurance}]]}} {{checkadv=[[1d20 @{Endurance}]]}}"
                    name="roll_EnduranceCheck">Endurance</button>
                <input type="checkbox" value="1" name="attr_EndDets" checked="true" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Endurance-Train" class="Training">
                        <option value="0" selected>Untrained</option>
                        <option value="2">Adept</option>
                        <option value="4">Trained</option>
                        <option value="6">Experienced</option>
                        <option value="8">Expert</option>
                        <option value="10">Master</option>
                    </select>
                    <label>
                        Misc. Bonus
                        <input type="number" name="attr_Endurance-MiscBonus" value="0" /></label>
                    <input name="Endurance-Trained" type="hidden" value="Untrained" />
                </div>
            </div>
        </div>
        <div>
            <input type="number" name="attr_Dexterity" value="10" />
            <input name="attr_dexmod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Dexterity Check}} {{check=[[1d20 + @{dexmod} + @{Quest}]]}} {{checkadv=[[1d20 + @{dexmod} + @{Quest}]]}}"
                name="roll_DexterityCheck">Dexterity</button>
            <input type="checkbox" value="1" name="attr_DexSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <div>
                    <span name="attr_Acrobatics" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Acrobatics Check}} {{Trained=@{Acrobatics-Trained}}} {{check=[[1d20 @{Acrobatics}]]}} {{checkadv=[[1d20 @{Acrobatics}]]}}"
                        name="roll_AcrobaticsCheck">Acrobatics</button>
                    <input type="checkbox" name="attr_AcrDets" value="1" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Acrobatics-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Acrobatics-MiscBonus" value="0" /></label>
                        <input name="Acrobatics-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Stealth" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Stealth Check}} {{Trained=@{Stealth-Trained}}} {{check=[[1d20 @{Stealth}]]}} {{checkadv=[[1d20 @{Stealth}]]}}"
                        name="roll_StealthCheck">Stealth</button>
                    <input type="checkbox" value="1" name="attr_SteDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Stealth-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Stealth-MiscBonus" value="0" /></label>
                        <input name="Stealth-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_SleightofHand" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Sleight of Hand Check}} {{Trained=@{SleightofHand-Trained}}} {{check=[[1d20 @{SleightofHand}]]}} {{checkadv=[[1d20 @{SleightofHand}]]}}"
                        name="roll_SleightofHandCheck">Sleight of Hand</button>
                    <input type="checkbox" name="attr_SleDets" value="1" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_SleightofHand-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_SleightofHand-MiscBonus" value="0" /></label>
                        <input name="SleightofHand-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
            </div>
        </div>
        <div>
            <input type="number" name="attr_Intelligence" value="10" />
            <input name="attr_intmod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Intelligence Check}} {{check=[[1d20 + @{intmod} + @{Quest}]]}} {{checkadv=[[1d20 + @{intmod} + @{Quest}]]}}"
                name="roll_IntelligenceCheck">Intelligence</button>
            <input type="checkbox" value="1" name="attr_IntSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <div>
                    <span name="attr_Arcana" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Arcana Check}} {{Trained=@{Arcana-Trained}}} {{check=[[1d20 @{Arcana}]]}} {{checkadv=[[1d20 @{Arcana}]]}}"
                        name="roll_ArcanaCheck">Arcana</button>
                    <input type="checkbox" value="1" name="attr_ArcDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Arcana-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Arcana-MiscBonus" value="0" /></label>
                        <input name="Arcana-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Debate" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Debate Check}} {{Trained=@{Debate-Trained}}} {{check=[[1d20 @{Debate}]]}} {{checkadv=[[1d20 @{Debate}]]}}"
                        name="roll_DebateCheck">Debate</button>
                    <input type="checkbox" value="1" name="attr_DebDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Debate-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Debate-MiscBonus" value="0" /></label>
                        <input name="Debate-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Repair" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Repair Check}} {{Trained=@{Repair-Trained}}} {{check=[[1d20 @{Repair}]]}} {{checkadv=[[1d20 @{Repair}]]}}"
                        name="roll_RepairCheck">Repair</button>
                    <input type="checkbox" value="1" name="attr_RepDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Repair-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Repair-MiscBonus" value="0" /></label>
                        <input name="Repair-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Research" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Research Check}} {{Trained=@{Research-Trained}}} {{check=[[1d20 @{Research}]]}} {{checkadv=[[1d20 @{Research}]]}}"
                        name="roll_ResearchCheck">Research</button>
                    <input type="checkbox" value="1" name="attr_ResDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Research-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Research-MiscBonus" value="0" /></label>
                        <input name="Research-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
            </div>
        </div>
        <div>
            <input type="number" name="attr_Wisdom" value="10" />
            <input name="attr_wismod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Wisdom Check}} {{check=[[1d20 + @{wismod} + @{Quest}]]}} {{checkadv=[[1d20 + @{wismod} + @{Quest}]]}}"
                name="roll_WisdomCheck">Wisdom</button>
            <input type="checkbox" value="1" name="attr_WisSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <div>
                    <span name="attr_HandleAnimal" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Handle Animal Check}} {{Trained=@{HandleAnimal-Trained}}} {{check=[[1d20 @{HandleAnimal}]]}} {{checkadv=[[1d20 @{HandleAnimal}]]}}"
                        name="roll_HandleAnimalCheck">Handle Animal</button>
                    <input type="checkbox" name="attr_HanDets" value="1" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_HandleAnimal-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_HandleAnimal-MiscBonus" value="0" /></label>
                        <input name="HandleAnimal-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Insight" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Insight Check}} {{Trained=@{Insight-Trained}}} {{check=[[1d20 @{Insight}]]}} {{checkadv=[[1d20 @{Insight}]]}}"
                        name="roll_InsightCheck">Insight</button>
                    <input type="checkbox" value="1" name="attr_InsDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Insight-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Insight-MiscBonus" value="0" /></label>
                        <input name="Insight-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Medicine" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Medicine Check}} {{Trained=@{Medicine-Trained}}} {{check=[[1d20 @{Medicine}]]}} {{checkadv=[[1d20 @{Medicine}]]}}"
                        name="roll_MedicineCheck">Medicine</button>
                    <input type="checkbox" value="1" name="attr_MedDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Medicine-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Medicine-MiscBonus" value="0" /></label>
                        <input name="Medicine-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Perception" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Perception Check}} {{Trained=@{Perception-Trained}}} {{check=[[1d20 @{Perception}]]}} {{checkadv=[[1d20 @{Perception}]]}}"
                        name="roll_PerceptionCheck">Perception</button>
                    <input type="checkbox" name="attr_PerDets" value="1" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Perception-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Perception-MiscBonus" value="0" /></label>
                        <input name="Perception-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Survival" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Survival Check}} {{Trained=@{Survival-Trained}}} {{check=[[1d20 @{Survival}]]}} {{checkadv=[[1d20 @{Survival}]]}}"
                        name="roll_SurvivalCheck">Survival</button>
                    <input type="checkbox" value="1" name="attr_SurDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Survival-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Survival-MiscBonus" value="0" /></label>
                        <input name="Survival-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
            </div>
        </div>
        <div>
            <input type="number" name="attr_Charisma" value="10" />
            <input name="attr_chamod" type="hidden" value="0" />
            <button type="roll" class="skillcheckroll"
                value="&{template:skillcheck} {{name=Charisma Check}} {{check=[[1d20 + @{chamod} + @{Quest}]]}} {{checkadv=[[1d20 + @{chamod} + @{Quest}]]}}"
                name="roll_CharismaCheck">Charisma</button>
            <input type="checkbox" value="1" name="attr_ChaSkillDrop" class="arrow" title="Show Details" />
            <div class="body">
                <div>
                    <span name="attr_Appeal" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Appeal Check}} {{Trained=@{Appeal-Trained}}} {{check=[[1d20 @{Appeal}]]}} {{checkadv=[[1d20 @{Appeal}]]}}"
                        name="roll_AppealCheck">Appeal</button>
                    <input type="checkbox" value="1" name="attr_AppDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Appeal-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Appeal-MiscBonus" value="0" /></label>
                        <input name="Appeal-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Impress" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Impress Check}} {{Trained=@{Impress-Trained}}} {{check=[[1d20 @{Impress}]]}} {{checkadv=[[1d20 @{Impress}]]}}"
                        name="roll_ImpressCheck">Impress</button>
                    <input type="checkbox" value="1" name="attr_ImpDets" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Impress-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Impress-MiscBonus" value="0" /></label>
                        <input name="Impress-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
                <div>
                    <span name="attr_Socialize" value="+0" style="font-size:140%;"></span>
                    <button type="roll" class="skillcheckroll"
                        value="&{template:skillcheck} {{name=Socialize Check}} {{Trained=@{Socialize-Trained}}} {{check=[[1d20 @{Socialize}]]}} {{checkadv=[[1d20 @{Socialize}]]}}"
                        name="roll_SocializeCheck">Socialize</button>
                    <input type="checkbox" name="attr_SocDets" value="1" checked="true" class="arrow"
                        title="Show Details" />
                    <div class="body">
                        <select name="attr_Socialize-Train" class="Training">
                            <option value="0" selected>Untrained</option>
                            <option value="2">Adept</option>
                            <option value="4">Trained</option>
                            <option value="6">Experienced</option>
                            <option value="8">Expert</option>
                            <option value="10">Master</option>
                        </select>
                        <label>
                            Misc. Bonus
                            <input type="number" name="attr_Socialize-MiscBonus" value="0" /></label>
                        <input name="Socialize-Trained" type="hidden" value="Untrained" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="competencies section">
        <h2>Competencies</h2>
        <fieldset class="repeating_competencies">
            <input type="text" name="attr_competency" placeholder="Competency" />
        </fieldset>
    </div>
    <div class="defense section">
        <h2>Key Values</h2>
        <label class="hp" title="HP"><input type="number" name="attr_HP" value="20" /> /
            <input type="number" name="attr_HP_max" value="20" /> HP</label>
        <label class="small"><input type="number" name="attr_HP-Bloodied" value="10" /> Bloodied</label>
        <label class="small"><input type="number" name="attr_HP-surgeValue" value="5" /> Surge Value</label>
        <br />
        <label title="Surges"><input type="number" name="attr_surges" value="6" /> /
            <input type="number" name="attr_surges_max" value="6" />
            Surges</label>
        <h3>Defenses</h3>
        <div>
            <label class="defense">
                <input type="number" name="attr_AC" value="10" class="defense" />
                Armor Class (AC)
            </label>
            <input type="checkbox" class="arrow" title="Show Details">
            <div class="body">
                <label class="miscbonus">
                    Misc bonus: <input type="number" name="attr_AC-Misc" value="0" />
                </label>
            </div>
        </div>
        <div>
            <label class="defense">
                <input type="number" name="attr_Fort" value="10" class="defense" />
                Fortitude
            </label>
            <input type="checkbox" class="arrow" title="Show Details">
            <div class="body">
                <label class="miscbonus">
                    Class/Misc bonus:
                    <input type="number" name="attr_Fort-Misc" value="0" />
                </label>
            </div>
        </div>
        <div>
            <label class="defense">
                <input type="number" name="attr_Ref" value="10" class="defense" />
                Reflex
            </label>
            <input type="checkbox" class="arrow" title="Show Details">
            <div class="body">
                <label class="miscbonus">
                    Class/Misc bonus:
                    <input type="number" name="attr_Ref-Misc" value="0" />
                </label>
            </div>
        </div>
        <div>
            <label class="defense">
                <input type="number" name="attr_Will" value="10" class="defense" />
                Will
            </label>
            <input type="checkbox" class="arrow" title="Show Details">
            <div class="body">
                <label class="miscbonus">
                    Class/Misc bonus:
                    <input type="number" name="attr_Will-Misc" value="0" />
                </label>
            </div>
        </div>
    </div>
    <div class="effects section">
        <h2>Stats</h2>
        <h3>Movement</h3>
        <input type="text" name="attr_speed" class="speed" placeholder="30 feet" />
        <div class="bonusdice">
            <button type="roll" class="bonusdice-roll" name="roll_Striker_Damage"
                value="&{template:damage} {{name=Bonus Dice}} {{damage=[[@{bonusdice-entry}]]}} {{dmgcrit=[[@{bonusdice-crit}]]}}">
                Bonus Dice
            </button>
            <input type="text" name="attr_bonusdice-entry"  placeholder="1d8" />
            <input type="hidden" value="0" name="attr_bonusdice-crit" />
        </div>
        <div class="powerpoints right">
            <h3>Resource</h3>
            <input type="number" value="0" name="attr_PowerPoints" /> /
            <input type="number" value="0" name="attr_PowerPoints_max" />
        </div>
        <h3>Persistent Effects</h3>
        <div class="Persistent-Effect-Block">
            <textarea name="attr_Persistent-Effect-Text" placeholder="Status Effects, Buffs, etc."></textarea>
        </div>
    </div>
    <div class="standard section">
        <h2>Standard Actions</h2>
        <fieldset class="repeating_Standard">
            <input type="text" name="attr_Standard-Name" placeholder="Power Name" />
            <input type="checkbox" value="1" checked="true" name="attr_Standard-display" class="arrow"
                title="Show Details" />
            <div class="body">
                <label class="inlineLabel">
                    Recharge
                    <select name="attr_Standard-usage" class="Usage">
                        <option value="At-Will">At-Will</option>
                        <option value="Encounter">Encounter</option>
                        <option value="Daily">Daily</option>
                    </select>
                </label>
                <label title="Range and Targets">
                    Range and Targets
                    <input type="text" name="attr_Standard-RangeTargets" placeholder="Melee One Creature" />
                </label>
                <label title="Power Text">
                    <button type="roll" class="combatroll" name="roll_Standard-TextOut"
                        value="&{template:powertext} {{name=@{Standard-Name}}} {{powertext=@{Standard-Power-Text}}}">Power
                        Text</button>
                    <textarea name="attr_Standard-Power-Text" placeholder="Effect: Create a zone"></textarea>
                </label>
                <div class="AttackRoll">
                    <input type="hidden" name="attr_Standard-HitBonus" value="+0" />
                    <button type="roll" class="combatroll" name="roll_Standard-Attack"
                        value="&{template:attack} {{name=@{Standard-Name}}} {{RangeTargets=@{Standard-RangeTargets}}} {{attack=[[1d20 @{Standard-HitBonus}]]}} {{attackadv=[[1d20 @{Standard-HitBonus}]]}} {{edge=[[1d4]]}} {{defense=@{Standard-DefSelect}}}"><span
                            name="attr_Standard-HitBonus" value="+0">+0</span>
                        vs.
                        <span name="attr_Standard-DefSelect">AC</span></button>
                </div>
                <div class="DamageRoll">
                    <input type="hidden" name="attr_Standard-flatdamage" />
                    <button type="roll" class="combatroll" name="roll_Standard-Damage"
                        value="&{template:damage} {{name=@{Standard-Name}}} {{damage=[[@{Standard-damagedice} @{Standard-flatdamage}]]}} {{dmgcrit=[[@{Standard-critdice} + @{Standard-critflat} @{Standard-flatdamage}]]}} {{dmgtype=@{Standard-damagetype}}}"><span
                            name="attr_Standard-damagedice" value="1d4">1d4</span><span value="0"
                            name="attr_Standard-flatdamage" value="\+0">+0</span>
                        <span name="attr_Standard-damagetype" value="Fire">Fire</span>
                        damage</button>
                </div>
                Setup
                <input type="checkbox" value="1" checked="true" name="attr_Standard-setup-display" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Standard-Accessory" class="AccesorySelect">
                        <option value="imp1"> Implement 1 </option>
                        <option value="imp2"> Implement 2 </option>
                        <option value="wep1"> Weapon 1 </option>
                        <option value="wep2"> Weapon 2 </option>
                        <option value="wep3"> Weapon 3 </option>
                    </select>
                    <br />
                    <span class="AttSelect">
                        <select name="attr_Standard-Ability">
                            <option value="strmod">Strength</option>
                            <option value="conmod">Constitution</option>
                            <option value="dexmod">Dexterity</option>
                            <option value="intmod">Intelligence</option>
                            <option value="wismod">Wisdom</option>
                            <option value="chamod">Charisma</option>
                        </select>
                    </span>
                    vs.
                    <span class="DefSelect">
                        <select name="attr_Standard-DefSelect">
                            <option value="AC">AC</option>
                            <option value="Fort">Fortitude</option>
                            <option value="Ref">Reflex</option>
                            <option value="Will">Will</option>
                        </select>
                    </span>
                    <label title="Damage Dice">
                        Damage Dice
                        <input type="text" name="attr_Standard-damagedice" class="diceInput" value="1d4" /></label>
                    <label title="Damage Type">
                        Damage Type
                        <input type="text" name="attr_Standard-damagetype" class="diceInput" value="Fire" /></label>
                    <label title="Crit dice">
                        Crit Dice
                        <input type="text" value="1d4" class="diceInput" name="attr_Standard-critdice" /></label>
                    <label title="Misc. Bonus to hit">
                        Misc Bonus to Hit
                        <input type="number" value="0" name="attr_Standard-MiscAttackBonus" /></label>
                    <label title="Other damage bonuses, such as from feats">
                        Misc Flat Damage
                        <input type="number" name="attr_Standard-miscdamage" value="0" />
                    </label>
                    <label title="For basic attacks that don't add the ability modifier to the damage roll">
                        Abi mod to damage
                        <input type="checkbox" name="attr_Standard-abidamage" checked value=1/>
                    </label>
                    <input type="hidden" value="0" name="attr_Standard-HitBonus-accessory" />
                    <input type="hidden" value="0" name="attr_Standard-abimod" />
                    <input type="hidden" value="0" name="attr_Standard-critflat" />
                </div>
            </div>
        </fieldset>
    </div>
    <div class="move section">
        <h2>Move Actions</h2>
        <fieldset class="repeating_Move">
            <input type="text" name="attr_Move-Name" placeholder="Power Name" />
            <input type="checkbox" value="1" checked="true" name="attr_Move-display" class="arrow"
                title="Show Details" />
            <div class="body">
                <label class="inlineLabel">
                    Recharge
                    <select name="attr_Move-usage" class="Usage">
                        <option value="At-Will">At-Will</option>
                        <option value="Encounter">Encounter</option>
                        <option value="Daily">Daily</option>
                    </select>
                </label>
                <label title="Range and Targets">
                    Range and Targets
                    <input type="text" name="attr_Move-RangeTargets" placeholder="Personal" />
                </label>
                <label title="Power Text">
                    <button type="roll" class="combatroll" name="roll_Move-TextOut"
                        value="&{template:powertext} {{name=@{Move-Name}}} {{powertext=@{Move-Power-Text}}}">Power
                        Text</button>
                    <textarea name="attr_Move-Power-Text" placeholder="Effect: Shift your speed"></textarea>
                </label>
                <div class="AttackRoll">
                    <input type="hidden" name="attr_Move-HitBonus" value="+0" />
                    <button type="roll" class="combatroll" name="roll_Move-Attack"
                        value="&{template:attack} {{name=@{Move-Name}}} {{RangeTargets=@{Move-RangeTargets}}} {{attack=[[1d20 @{Move-HitBonus}]]}} {{attackadv=[[1d20 @{Move-HitBonus}]]}} {{defense=@{Move-DefSelect}}} {{edge=[[1d4]]}}"><span
                            name="attr_Move-HitBonus" value="+0">+0</span>
                        vs.
                        <span name="attr_Move-DefSelect">AC</span></button>
                </div>
                <div class="DamageRoll">
                    <input type="hidden" name="attr_Move-flatdamage" />
                    <button type="roll" class="combatroll" name="roll_Move-Damage"
                        value="&{template:damage} {{name=@{Move-Name}}} {{damage=[[@{Move-damagedice} @{Move-flatdamage}]]}} {{dmgcrit=[[@{Move-critdice} + @{Move-critflat} @{Move-flatdamage}]]}} {{dmgtype=@{Move-damagetype}}}"><span
                            name="attr_Move-damagedice" value="1d4">1d4</span><span value="0" name="attr_Move-flatdamage"
                            value="\+0">+0</span>
                        <span name="attr_Move-damagetype" value="Fire">Fire</span>
                        damage</button>
                </div>
                Setup
                <input type="checkbox" value="1" checked="true" name="attr_Move-setup-display" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Move-Accessory" class="AccesorySelect">
                        <option value="imp1"> Implement 1 </option>
                        <option value="imp2"> Implement 2 </option>
                        <option value="wep1"> Weapon 1 </option>
                        <option value="wep2"> Weapon 2 </option>
                        <option value="wep3"> Weapon 3 </option>
                    </select>
                    <br />
                    <span class="AttSelect">
                        <select name="attr_Move-Ability">
                            <option value="strmod">Strength</option>
                            <option value="conmod">Constitution</option>
                            <option value="dexmod">Dexterity</option>
                            <option value="intmod">Intelligence</option>
                            <option value="wismod">Wisdom</option>
                            <option value="chamod">Charisma</option>
                        </select>
                    </span>
                    vs.
                    <span class="DefSelect">
                        <select name="attr_Move-DefSelect">
                            <option value="AC">AC</option>
                            <option value="Fort">Fortitude</option>
                            <option value="Ref">Reflex</option>
                            <option value="Will">Will</option>
                        </select>
                    </span>
                    <label title="Damage Dice">
                        Damage Dice
                        <input type="text" name="attr_Move-damagedice" class="diceInput" value="1d4" /></label>
                    <label title="Damage Type">
                        Damage Type
                        <input type="text" name="attr_Move-damagetype" class="diceInput" value="Fire" /></label>
                    <label title="Crit dice">
                        Crit Dice
                        <input type="text" value="1d4" class="diceInput" name="attr_Move-critdice" /></label>
                    <label title="Misc. Bonus to hit">
                        Misc Bonus to Hit
                        <input type="number" value="0" name="attr_Move-MiscAttackBonus" /></label>
                    <label title="Other damage bonuses, such as from feats">
                        Misc Flat Damage
                        <input type="number" name="attr_Move-miscdamage" value="0" />
                    </label>
                    <label title="For basic attacks that don't add the ability modifier to the damage roll">
                        Abi mod to damage
                        <input type="checkbox" name="attr_Move-abidamage" checked value=1/>
                    </label>
                    <input type="hidden" value="0" name="attr_Move-HitBonus-accessory" />
                    <input type="hidden" value="0" name="attr_Move-abimod" />
                    <input type="hidden" value="0" name="attr_Move-critflat" />
                </div>
            </div>
        </fieldset>
    </div>
    <div class="minor section">
        <h2>Minor Actions</h2>
        <fieldset class="repeating_Minor">
            <input type="text" name="attr_Minor-Name" placeholder="Power Name" />
            <input type="checkbox" value="1" checked="true" name="attr_Minor-display" class="arrow"
                title="Show Details" />
            <div class="body">
                <label class="inlineLabel">
                    Recharge
                    <select name="attr_Minor-usage" class="Usage">
                        <option value="At-Will">At-Will</option>
                        <option value="Encounter">Encounter</option>
                        <option value="Daily">Daily</option>
                    </select>
                </label>
                <label title="Range and Targets">
                    Range and Targets
                    <input type="text" name="attr_Minor-RangeTargets" placeholder="Ranged Sight One Creature" />
                </label>
                <label title="Power Text">
                    <button type="roll" class="combatroll" name="roll_Minor-TextOut"
                        value="&{template:powertext} {{name=@{Minor-Name}}} {{powertext=@{Minor-Power-Text}}}">Power
                        Text</button>
                    <textarea name="attr_Minor-Power-Text" placeholder="Mark the target"></textarea>
                </label>
                <div class="AttackRoll">
                    <input type="hidden" name="attr_Minor-HitBonus" value="+0" />
                    <button type="roll" class="combatroll" name="roll_Minor-Attack"
                        value="&{template:attack} {{name=@{Minor-Name}}} {{RangeTargets=@{Minor-RangeTargets}}} {{attack=[[1d20 @{Minor-HitBonus}]]}} {{attackadv=[[1d20 @{Minor-HitBonus}]]}} {{defense=@{Minor-DefSelect}}} {{edge=[[1d4]]}}"><span
                            name="attr_Minor-HitBonus" value="+0">+0</span>
                        vs.
                        <span name="attr_Minor-DefSelect">AC</span></button>
                </div>
                <div class="DamageRoll">
                    <input type="hidden" name="attr_Minor-flatdamage" />
                    <button type="roll" class="combatroll" name="roll_Minor-Damage"
                        value="&{template:damage} {{name=@{Minor-Name}}} {{damage=[[@{Minor-damagedice} @{Minor-flatdamage}]]}} {{dmgcrit=[[@{Minor-critdice} + @{Minor-critflat} @{Minor-flatdamage}]]}} {{dmgtype=@{Minor-damagetype}}}"><span
                            name="attr_Minor-damagedice" value="1d4">1d4</span><span value="0" name="attr_Minor-flatdamage"
                            value="\+0">+0</span>
                        <span name="attr_Minor-damagetype" value="Fire">Fire</span>
                        damage</button>
                </div>
                Setup
                <input type="checkbox" value="1" checked="true" name="attr_Minor-setup-display" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Minor-Accessory" class="AccesorySelect">
                        <option value="imp1"> Implement 1 </option>
                        <option value="imp2"> Implement 2 </option>
                        <option value="wep1"> Weapon 1 </option>
                        <option value="wep2"> Weapon 2 </option>
                        <option value="wep3"> Weapon 3 </option>
                    </select>
                    <br />
                    <span class="AttSelect">
                        <select name="attr_Minor-Ability">
                            <option value="strmod">Strength</option>
                            <option value="conmod">Constitution</option>
                            <option value="dexmod">Dexterity</option>
                            <option value="intmod">Intelligence</option>
                            <option value="wismod">Wisdom</option>
                            <option value="chamod">Charisma</option>
                        </select>
                    </span>
                    vs.
                    <span class="DefSelect">
                        <select name="attr_Minor-DefSelect">
                            <option value="AC">AC</option>
                            <option value="Fort">Fortitude</option>
                            <option value="Ref">Reflex</option>
                            <option value="Will">Will</option>
                        </select>
                    </span>
                    <label title="Damage Dice">
                        Damage Dice
                        <input type="text" name="attr_Minor-damagedice" class="diceInput" value="1d4" /></label>
                    <label title="Damage Type">
                        Damage Type
                        <input type="text" name="attr_Minor-damagetype" class="diceInput" value="Fire" /></label>
                    <label title="Crit dice">
                        Crit Dice
                        <input type="text" value="1d4" class="diceInput" name="attr_Minor-critdice" /></label>
                    <label title="Misc. Bonus to hit">
                        Misc Bonus to Hit
                        <input type="number" value="0" name="attr_Minor-MiscAttackBonus" /></label>
                    <label title="Other damage bonuses, such as from feats">
                        Misc Flat Damage
                        <input type="number" name="attr_Minor-miscdamage" value="0" />
                    </label>
                    <label title="For basic attacks that don't add the ability modifier to the damage roll">
                        Abi mod to damage
                        <input type="checkbox" name="attr_Minor-abidamage" checked value=1/>
                    </label>
                    <input type="hidden" value="0" name="attr_Minor-HitBonus-accessory" />
                    <input type="hidden" value="0" name="attr_Minor-abimod" />
                    <input type="hidden" value="0" name="attr_Minor-critflat" />
                </div>
            </div>
        </fieldset>
    </div>
    <div class="reaction section">
        <h2>Immediate Actions</h2>
        <fieldset class="repeating_Reaction">
            <input type="text" name="attr_Reaction-Name" placeholder="Power Name" />
            <input type="checkbox" value="1" checked="true" name="attr_Reaction-display" class="arrow"
                title="Show Details" />
            <div class="body">
                <label class="inlineLabel">
                    Recharge
                    <select name="attr_Reaction-usage" class="Usage">
                        <option value="At-Will">At-Will</option>
                        <option value="Encounter">Encounter</option>
                        <option value="Daily">Daily</option>
                    </select>
                </label>
                <label>
                    Action
                    <select name="attr_Reaction-action" class="Action">
                        <option value="1">Immediate Interrupt</option>
                        <option value="2">Immediate Reaction</option>
                        <option value="3">Free Interrupt</option>
                        <option value="4">Free Reaction</option>
                    </select>
                </label>
                <label>
                    Trigger <input type="text" name="attr_Reaction-trigger" placeholder="An Enemy Bloodies You" />
                </label>
                <label title="Range and Targets">
                    Range and Targets
                    <input type="text" name="attr_Reaction-RangeTargets" placeholder="The Triggering Enemy" />
                </label>
                <label title="Power Text">
                    <button type="roll" class="combatroll" name="roll_Reaction-TextOut"
                        value="&{template:powertext} {{name=@{Reaction-Name}}} {{powertext=@{Reaction-Power-Text}}}">Power
                        Text</button>
                    <textarea name="attr_Reaction-Power-Text" placeholder="You gain resistance"></textarea>
                </label>
                <div class="AttackRoll">
                    <input type="hidden" name="attr_Reaction-HitBonus" value="+0" />
                    <button type="roll" class="combatroll" name="roll_Reaction-Attack"
                        value="&{template:attack} {{name=@{Reaction-Name}}} {{RangeTargets=@{Reaction-RangeTargets}}} {{attack=[[1d20 @{Reaction-HitBonus}]]}} {{attackadv=[[1d20 @{Reaction-HitBonus}]]}} {{defense=@{Reaction-DefSelect}}} {{edge=[[1d4]]}}"><span
                            name="attr_Reaction-HitBonus" value="+0">+0</span>
                        vs.
                        <span name="attr_Reaction-DefSelect">AC</span></button>
                </div>
                <div class="DamageRoll">
                    <input type="hidden" name="attr_Reaction-flatdamage" />
                    <button type="roll" class="combatroll" name="roll_Reaction-Damage"
                        value="&{template:damage} {{name=@{Reaction-Name}}} {{damage=[[@{Reaction-damagedice} @{Reaction-flatdamage}]]}} {{dmgcrit=[[@{Reaction-critdice} + @{Reaction-critflat} @{Reaction-flatdamage}]]}} {{dmgtype=@{Reaction-damagetype}}}"><span
                            name="attr_Reaction-damagedice" value="1d4">1d4</span><span value="0"
                            name="attr_Reaction-flatdamage" value="\+0">+0</span>
                        <span name="attr_Reaction-damagetype" value="Fire">Fire</span>
                        damage</button>
                </div>
                Setup
                <input type="checkbox" value="1" checked="true" name="attr_Reaction-setup-display" class="arrow"
                    title="Show Details" />
                <div class="body">
                    <select name="attr_Reaction-Accessory" class="AccesorySelect">
                        <option value="imp1"> Implement 1 </option>
                        <option value="imp2"> Implement 2 </option>
                        <option value="wep1"> Weapon 1 </option>
                        <option value="wep2"> Weapon 2 </option>
                        <option value="wep3"> Weapon 3 </option>
                    </select>
                    <br />
                    <span class="AttSelect">
                        <select name="attr_Reaction-Ability">
                            <option value="strmod">Strength</option>
                            <option value="conmod">Constitution</option>
                            <option value="dexmod">Dexterity</option>
                            <option value="intmod">Intelligence</option>
                            <option value="wismod">Wisdom</option>
                            <option value="chamod">Charisma</option>
                        </select>
                    </span>
                    vs.
                    <span class="DefSelect">
                        <select name="attr_Reaction-DefSelect">
                            <option value="AC">AC</option>
                            <option value="Fort">Fortitude</option>
                            <option value="Ref">Reflex</option>
                            <option value="Will">Will</option>
                        </select>
                    </span>
                    <label title="Damage Dice">
                        Damage Dice
                        <input type="text" name="attr_Reaction-damagedice" class="diceInput" value="1d4" /></label>
                    <label title="Damage Type">
                        Damage Type
                        <input type="text" name="attr_Reaction-damagetype" class="diceInput" value="Fire" /></label>
                    <label title="Crit dice">
                        Crit Dice
                        <input type="text" value="1d4" class="diceInput" name="attr_Reaction-critdice" /></label>
                    <label title="Misc. Bonus to hit">
                        Misc Bonus to Hit
                        <input type="number" value="0" name="attr_Reaction-MiscAttackBonus" /></label>
                    <label title="Other damage bonuses, such as from feats">
                        Misc Flat Damage
                        <input type="number" name="attr_Reaction-miscdamage" value="0" />
                    </label>
                    <label title="For basic attacks that don't add the ability modifier to the damage roll">
                        Abi mod to damage
                        <input type="checkbox" name="attr_Reaction-abidamage" checked value=1/>
                    </label>
                    <input type="hidden" value="0" name="attr_Reaction-HitBonus-accessory" />
                    <input type="hidden" value="0" name="attr_Reaction-abimod" />
                    <input type="hidden" value="0" name="attr_Reaction-critflat" />
                </div>
            </div>
        </fieldset>
    </div>
    <div class="features section">
        <h2>Features</h2>
        <h3>Race Features</h3>
        <fieldset class="repeating_RaceFeatures">
            <input type="text" name="attr_RaceFeature-name" placeholder="Darkvision" /> <input type="checkbox"
                class="arrow" title="Show Details">
            <div class="body">
                <textarea name="attr_RaceFeature-description"></textarea>
            </div>
        </fieldset>
        <h3>Class Features</h3>
        <fieldset class="repeating_ClassFeatures">
            <input type="text" name="attr_ClassFeature-name" placeholder="Magic" /> <input type="checkbox" class="arrow"
                title="Show Details">
            <div class="body">
                <textarea name="attr_ClassFeature-description"></textarea>
            </div>
        </fieldset>
        <h3>Feats</h3>
        <fieldset class="repeating_Feats">
            <input type="text" name="attr_Feat-name" placeholder="Toughness" /> <input type="checkbox" class="arrow"
                title="Show Details">
            <div class="body">
                <textarea name="attr_Feat-description"></textarea>
            </div>
        </fieldset>
        <h3>Flaws and Longterm Conditions</h3>
        <fieldset class="repeating_Flaws_LongTermConditions">
            <input type="text" name="attr_Flaws_LongTermCondition-name" placeholder="Mummy Rot" /> <input
                type="checkbox" class="arrow" title="Show Details">
            <div class="body">
                <textarea name="attr_Flaws_LongTermCondition-description"></textarea>
            </div>
        </fieldset>
    </div>
    <div class="worn section">
        <h2>Worn Equipment</h2>        
        <div class="weapon">
            <h3>Weapon 1</h3>
            <input type="text" name="attr_wep1-Name" class="item" placeholder="Longsword" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <button type="roll" class="weaponba"
                    value="&{template:attack} {{name=@{wep1-Name}}} {{RangeTargets=@{wep1-Range}}} {{attack=[[1d20 @{wep1-HitBonus}]]}} {{attackadv=[[1d20 @{wep1-HitBonus}]]}} {{edge=[[1d4]]}} {{defense=AC}}"
                    name="roll_wep1-basic">Basic Attack</button>
                <input type="text" name="attr_wep1-Range" placeholder="Melee 5'" class="weaponrange"/>
                <input type="hidden" name="attr_wep1-HitBonus" value="+0"/>
                <label class="small proficiency">Prof.
                    <input type="number" name="attr_wep1-prof" value="2" /></label>
                <span class="AttSelect">
                    <select name="attr_wep1-Ability">
                        <option value="strmod">Strength</option>
                        <option value="conmod">Constitution</option>
                        <option value="dexmod">Dexterity</option>
                        <option value="intmod">Intelligence</option>
                        <option value="wismod">Wisdom</option>
                        <option value="chamod">Charisma</option>
                    </select>
                </span>
                <label class="small damage"> Dmg
                    <select name="attr_wep1-Damage" class="wepDamSelect">
                        <option value="1d4">1d4 </option>
                        <option value="1d6">1d6 </option>
                        <option value="1d8">1d8 </option>
                        <option value="1d10">1d10</option>
                        <option value="1d12">1d12</option>
                        <option value="2d4">2d4 </option>
                        <option value="2d6">2d6 </option>
                    </select>
                </label>
                <div class="brutal">
                    <label class="small brutal">
                        <input type="checkbox" name="attr_wep1-Brutal" value="r<" /> Brutal
                    </label>
                    <input type="number" name="attr_wep1-BrutN" min="1" max="2" value="1" />
                    <label class="small hicrit">High Crit
                        <input type="checkbox" name="attr_wep1-HighCrit" value="true" />
                    </label>
                </div>
                <textarea placeholder="Description"></textarea>
            </div>
        </div>
        <div class="weapon">
            <h3>Weapon 2</h3>
            <input type="text" name="attr_wep2-Name" class="item" placeholder="Dagger" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <label class="small proficiency">Prof.
                    <input type="number" name="attr_wep2-prof" value="2" /></label>
                <label class="small damage"> Dmg
                    <select name="attr_wep2-Damage" class="wepDamSelect">
                        <option value="1d4">1d4 </option>
                        <option value="1d6">1d6 </option>
                        <option value="1d8">1d8 </option>
                        <option value="1d10">1d10</option>
                        <option value="1d12">1d12</option>
                        <option value="2d4">2d4 </option>
                        <option value="2d6">2d6 </option>
                    </select>
                </label>
                <div class="brutal">
                    <label class="small brutal">
                        <input type="checkbox" name="attr_wep2-Brutal" value="r<" /> Brutal
                    </label>
                    <input type="number" name="attr_wep2-BrutN" min="1" max="2" value="1" />
                    <label class="small hicrit">High Crit
                        <input type="checkbox" name="attr_wep2-HighCrit" value="true" />
                    </label>
                </div>
            </div>
        </div>
        <div class="weapon">
            <h3>Weapon 3</h3>
            <input type="text" name="attr_wep3-Name" class="item" placeholder="Crossbow" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <label class="small proficiency">Prof.
                    <input type="number" name="attr_wep3-prof" value="2" /></label>
                <label class="small damage"> Dmg
                    <select name="attr_wep3-Damage" class="wepDamSelect">
                        <option value="1d4">1d4 </option>
                        <option value="1d6">1d6 </option>
                        <option value="1d8">1d8 </option>
                        <option value="1d10">1d10</option>
                        <option value="1d12">1d12</option>
                        <option value="2d4">2d4 </option>
                        <option value="2d6">2d6 </option>
                    </select>
                </label>
                <div class="brutal">
                    <label class="small brutal">
                        <input type="checkbox" name="attr_wep3-Brutal" value="r<" /> Brutal
                    </label>
                    <input type="number" name="attr_wep3-BrutN" min="1" max="2" value="1" />
                    <label class="small hicrit">High Crit
                        <input type="checkbox" name="attr_wep3-HighCrit" value="true" />
                    </label>
                </div>
            </div>
        </div>
        <div class="implement">
            <h3>Implement 1</h3>
            <input type="text" name="attr_imp1-Name" class="item" placeholder="Staff" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <label class="small"><input type="number" name="attr_imp1-prof" value="0" /> Attack
                    Bonus</label>
                <input type="hidden" name="attr_imp1-Damage" value="1d8" />
            </div>
        </div>
        <div class="implement">
            <h3>Implement 2</h3>
            <input type="text" name="attr_imp2-Name" class="item" placeholder="Wand" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <label class="small"><input type="number" name="attr_imp2-prof" value="0" /> Attack
                    Bonus</label>
                <input type="hidden" name="attr_imp2-Damage" value="1d8" />
            </div>
        </div>
        <div class="armor">
            <h3>Armor</h3>
            <input type="text" name="attr_ArmorItem-Name" value="Cloth" class="item"
                    placeholder="Studded Leather" />
            <span class="AttSelect-AC">
                <label class="small"><select name="attr_AC-Att">
                        <option value="0" selected>None (Heavy Armor)</option>
                        <option value="1">Strength</option>
                        <option value="2">Constitution</option>
                        <option value="3">Dexterity</option>
                        <option value="4">Intelligence</option>
                        <option value="5">Wisdom</option>
                        <option value="6">Charisma</option>
                    </select>
                    Attribute</label>
            </span>
            <label title="Armor Bonus">
                Armor Bonus <input type="number" name="attr_AC-Armor" value="0" /></label>
        </div>
        <div class="otherwornequipment">
            <h3>Other Equipment</h3>
            <input type="text" name="attr_HeadItem-name" placeholder="Head" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_HeadItem-description"></textarea>
            </div>
            <input type="text" name="attr_NeckItem-name" placeholder="Neck" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_NeckItem-description"></textarea>
            </div>
            <input type="text" name="attr_ArmsItem-name" placeholder="Arms" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_ArmsItem-description"></textarea>
            </div>
            <input type="text" name="attr_HandsItem-name" placeholder="Hands" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_HandsItem-description"></textarea>
            </div>
            <input type="text" name="attr_WaistItem-name" placeholder="Waist" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_WaistItem-description"></textarea>
            </div>
            <input type="text" name="attr_FeetItem-name" placeholder="Feet" class="item" />
            <input type="checkbox" class="arrow"/>
            <div class="body">
                <textarea name="attr_FeetItem-description"></textarea>
            </div>
        </div>
    </div>
    <div class="money section">
        <h2>Currency</h2>
        <span name="attr_Currency" value="0 gp" style="font-size: 140%"></span>
        <label><input type="number" name="attr_Platinum" value=0 /> Platinum Dragons</label>
        <label><input type="number" name="attr_Gold" value=0 /> Gold Galifars</label>
        <label><input type="number" name="attr_Silver" value=0 /> Silver Sovereigns</label>
        <label><input type="number" name="attr_Copper" value=0 /> Copper Crowns</label>
    </div>
    <div class="backpack section">
        <h2>General Equipment</h2>
        <h3>On Person</h3>
        <label>Space: <span name="attr_currentSpace" value="0">0</span> / <input type="number" name="attr_maxSpace"
                min=0 value=12 class="space"></label>
        <div class="repeatingItemsLabels"><span class="left">Name</span><span class="right">Quantity</span></div>
        <fieldset class="repeating_OnPersonItems">
            <input type="text" name="attr_OnPersonItem" class="Item_repeat" placeholder="A day's rations" />
            <input type="number" name="attr_OnPersonItem-Quantity" value="0" min="0">
            <input type="checkbox" name="attr_OnPerson-toggle" class="arrow" title="Show Details">
            <div class="body">
                <label><input type="number" name="attr_OnPersonItem-Space" value="0" step="0.25" /> Space (per)</label>
                <label>
                    Description
                    <textarea name="attr_OnPersonItem-description" placeholder="It's pretty and pink"></textarea>
                </label>
            </div>
        </fieldset>
        <h3>Left at Home</h3>
        <div class="repeatingItemsLabels"><span class="left">Name</span><span class="right">Quantity</span></div>
        <fieldset class="repeating_HomeItems">
            <input type="text" name="attr_HomeItem" class="Item_repeat" placeholder="A mystery chest" />
            <input type="number" name="attr_HomeItem-Quantity" value="0" min="0">
            <input type="checkbox" name="attr_Home-toggle" class="arrow" title="Show Details">
            <div class="body">
                <label><input type="number" name="attr_HomeItem-Space" value="0" step="0.25" /> Space (per)</label>
                <label>
                    Description
                    <textarea name="attr_HomeItem-description" placeholder="Golden and Shiny"></textarea>
                </label>
            </div>
        </fieldset>
    </div>
</div>
<!--Roll Templates-->
<div class="rolltemplates">
    <rolltemplate class="sheet-rolltemplate-attack">
        <table>
            <tr>
                <th>{{ name }}</th>
            </tr>
            <tr>
                <td class="subheader">{{ RangeTargets }}</td>
            </tr>
            <tr class="arrow-container">
                <td>
                    <div class="arrow-right"></div>
                </td>
            </tr>
            <tr class="rowcolor">
                <td>
                    <span class="tcat">Attack: </span>{{ attack }} |
                    {{ attackadv }} vs {{ defense }}
                </td>
            </tr>
            <tr>
                <td>Edge: {{edge}}</td>
            </tr>
        </table>
    </rolltemplate>
    <rolltemplate class="rolltemplate-damage">
        <table>
            <tr>
                <th>{{ name }}</th>
            </tr>
            <tr>
                <td>
                    <span class="tcat">Damage: </span>{{ damage }}
                    <span class="tcat">Crit: </span>{{ dmgcrit }}
                </td>
            </tr>
            <tr>
                <td><span class="tcat">Type: </span>{{ dmgtype }}</td>
            </tr>
        </table>
    </rolltemplate>
    <rolltemplate class="rolltemplate-skillcheck">
        <table>
            <tr>
                <th>{{ name }}</th>
            </tr>
            <tr>
                <td class="subheader">{{ Trained }}</td>
            </tr>
            <tr class="arrow-container">
                <td>
                    <div class="arrow-right"></div>
                </td>
            </tr>
            <tr class="rowcolor">
                <td>
                    <span class="tcat">Check: </span>{{ check }} |
                    {{ checkadv }}
                </td>
            </tr>
        </table>
    </rolltemplate>
    <rolltemplate class="rolltemplate-powertext">
        <table>
            <tr>
                <th>{{ name }}</th>
            </tr>
            <tr class="arrow-container">
                <td>
                    <div class="arrow-right"></div>
                </td>
            </tr>
            <tr class="rowcolor">
                <td><span class="tcat">Text: </span>{{ powertext }}</td>
            </tr>
        </table>
    </rolltemplate>
</div>
<!-- WORKERS -->
<script type="text/worker">
on("sheet:opened", function () {
    console.log("Sheet opened, JS is running");
});

on("change:hp_max", function () {
    getAttrs(["HP_max"], function (values) {
        setAttrs({
            "HP-Bloodied": Math.floor(values.HP_max / 2),
            "HP-surgeValue": Math.floor(values.HP_max / 4)
        });
    });
});

on("change:strength", function () {
        getAttrs(["Strength"], function (values) {
            setAttrs({
                strmod: Math.floor(values.Strength / 2 - 5)
            });
        });
    });

on("change:constitution", function () {
    getAttrs(["Constitution"], function (values) {
        setAttrs({
            conmod: Math.floor(values.Constitution / 2 - 5)
        });
    });
});

on("change:dexterity", function () {
    getAttrs(["Dexterity"], function (values) {
        setAttrs({
            dexmod: Math.floor(values.Dexterity / 2 - 5)
        });
    });
});

on("change:intelligence", function () {
    getAttrs(["Intelligence"], function (values) {
        setAttrs({
            intmod: Math.floor(values.Intelligence / 2 - 5)
        });
    });
});

on("change:wisdom", function () {
    getAttrs(["Wisdom"], function (values) {
        setAttrs({
            wismod: Math.floor(values.Wisdom / 2 - 5)
        });
    });
});

on("change:charisma", function () {
    getAttrs(["Charisma"], function (values) {
        setAttrs({
            chamod: Math.floor(values.Charisma / 2 - 5)
        });
    });
});

on(
    "change:ac-att change:strmod change:conmod change:dexmod change:intmod change:wismod change:chamod  change:quest change:ac-armor change:ac-misc",
    function () {
        getAttrs(
            [
                "AC-Att",
                "strmod",
                "conmod",
                "dexmod",
                "intmod",
                "wismod",
                "chamod",
                "Quest",
                "AC-Armor",
                "AC-Misc"
            ],
            function (values) {
                var abimod = 0;
                switch (parseInt(values["AC-Att"])) {
                    case 0:
                        abimod = 0;
                        break;
                    case 1:
                        abimod = values.strmod;
                        break;
                    case 2:
                        abimod = values.conmod;
                        break;
                    case 3:
                        abimod = values.dexmod;
                        break;
                    case 4:
                        abimod = values.intmod;
                        break;
                    case 5:
                        abimod = values.wismod;
                        break;
                    case 6:
                        abimod = values.chamod;
                        break;
                }
                var finalattr =
                    10 +
                    parseInt(abimod) +
                    parseInt(values.Quest) +
                    parseInt(values["AC-Armor"]) +
                    parseInt(values["AC-Misc"]);
                setAttrs({
                    AC: finalattr
                });
            }
        );
    }
);

on("change:strmod change:conmod change:quest change:fort-misc", function () {
    getAttrs(["strmod", "conmod", "Quest", "Fort-Misc"], function (values) {
        var finalattr =
            10 +
            Math.max(parseInt(values.strmod), parseInt(values.conmod)) +
            parseInt(values.Quest) +
            parseInt(values["Fort-Misc"]);
        setAttrs({
            Fort: finalattr
        });
    });
});

on("change:dexmod change:intmod change:quest change:ref-misc", function () {
    getAttrs(["dexmod", "intmod", "Quest", "Ref-Misc"], function (values) {
        var finalattr =
            10 +
            Math.max(parseInt(values.dexmod), parseInt(values.intmod)) +
            parseInt(values.Quest) +
            parseInt(values["Ref-Misc"]);
        setAttrs({
            Ref: finalattr
        });
    });
});

on("change:wismod change:chamod change:quest change:will-misc", function () {
    getAttrs(["wismod", "chamod", "Quest", "Will-Misc"], function (values) {
        var finalattr =
            10 +
            Math.max(parseInt(values.wismod), parseInt(values.chamod)) +
            parseInt(values.Quest) +
            parseInt(values["Will-Misc"]);
        setAttrs({
            Will: finalattr
        });
    });
});

on("change:bonusdice-entry", function () {
    getAttrs(["bonusdice-entry"], function (values) {
        var numdice = parseInt(values["bonusdice-entry"]);
        var size = 4;
        if (numdice < 10) {
            size = parseInt(values["bonusdice-entry"].substring(2));
        } else {
            size = parseInt(values["bonusdice-entry"].substring(3));
        }
        var finalattr = numdice * size;
        setAttrs({
            'bonusdice-crit': finalattr
        });
    });
});

on("change:repeating_standard:standard-accessory", function (eventInfo) {
    var accessory = eventInfo.newValue;
    var attack = accessory + "-prof";
    var damage = accessory + "-Damage";
    var brutal = accessory + "-Brutal";
    var brutN = accessory + "-BrutN";
    var crit = accessory + "-HighCrit";
    if (accessory.substring(0, 3) == "wep") {
        getAttrs(
            [attack, damage, brutal, brutN, crit, "level", "quest"],
            function (values) {
                var damagedice = values[damage];
                if (values[brutal] == "r<") {
                    damagedice = damagedice + values[brutal] + values[brutN];
                }
                var critdice = values["quest"] + "d6";
                if (values[crit] == "true") {
                    critdice =
                        critdice +
                        " + " +
                        parseInt(damagedice.substring(0, 1)) *
                        Math.ceil(parseInt(values["level"]) / 5) +
                        damagedice.substring(1);
                }
                setAttrs({
                    "repeating_Standard_Standard-HitBonus-accessory": parseInt(
                        values[attack]
                    ),
                    "repeating_Standard_Standard-damagedice": damagedice,
                    "repeating_Standard_Standard-critdice": critdice
                });
            }
        );
    } else {
        getAttrs([attack, damage, "quest"], function (values) {
            var critdice = values["quest"] + "d6";
            setAttrs({
                "repeating_Stanard_Standard-HitBonus-accessory": parseInt(
                    values[attack]
                ),
                "repeating_Standard_Standard-damagedice": values[damage],
                "repeating_Standard_Standard-critdice": values[critdice]
            });
        });
    }
});

on(
    "change:repeating_standard:standard-ability change:repeating_standard:standard-display",
    function (eventInfo) {
        getAttrs(["repeating_Standard_Standard-Ability"], function (values) {
            var modname = values["repeating_Standard_Standard-Ability"];
            getAttrs([modname], function (values) {
                setAttrs({
                    "repeating_Standard_Standard-abimod": parseInt(
                        values[modname]
                    )
                });
            });
        });
    }
);

on(
    "change:repeating_standard:standard-miscattackbonus change:repeating_standard:standard-abimod change:repeating_standard:standard-hitbonus-accessory change:repeating_standard:standard-display",
    function () {
        getAttrs(
            [
                "repeating_standard_Standard-MiscAttackBonus",
                "repeating_standard_Standard-abimod",
                "repeating_standard_Standard-HitBonus-accessory",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(
                        values["repeating_standard_Standard-MiscAttackBonus"]
                    ) +
                    parseInt(values["repeating_standard_Standard-abimod"]) +
                    parseInt(
                        values["repeating_standard_Standard-HitBonus-accessory"]
                    ) +
                    parseInt(values["Quest"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Standard_Standard-HitBonus": finalattr
                });
            }
        );
    }
);

on(
    "change:repeating_standard:standard-miscdamage change:repeating_standard:standard-abidamage change:repeating_standard:standard-abimod change:repeating_standard:standard-display",
    function () {
        getAttrs(
            [
                "repeating_Standard_Standard-miscdamage",
                "repeating_Standard_Standard-abidamage",
                "repeating_Standard_Standard-abimod",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_Standard_Standard-abidamage"]) *
                    parseInt(values["repeating_Standard_Standard-abimod"]) +
                    parseInt(values["Quest"]) +
                    parseInt(values["repeating_Standard_Standard-miscdamage"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Standard_Standard-flatdamage": finalattr
                });
            }
        );
    }
);

on("change:repeating_standard:standard-damagedice", function () {
    getAttrs(["repeating_Standard_Standard-damagedice"], function (values) {
        var numdice = parseInt(
            values["repeating_Standard_Standard-damagedice"]
        );
        var size = 4;
        if (numdice < 10) {
            size = parseInt(
                values["repeating_Standard_Standard-damagedice"].substring(2)
            );
        } else {
            size = parseInt(
                values["repeating_Standard_Standard-damagedice"].substring(3)
            );
        }
        var finalattr = numdice * size;
        setAttrs({
            "repeating_Standard_Standard-critflat": finalattr
        });
    });
});

on("change:repeating_move:move-accessory", function (eventInfo) {
    var accessory = eventInfo.newValue;
    var attack = accessory + "-prof";
    var damage = accessory + "-Damage";
    var brutal = accessory + "-Brutal";
    var brutN = accessory + "-BrutN";
    var crit = accessory + "-HighCrit";
    if (accessory.substring(0, 3) == "wep") {
        getAttrs(
            [attack, damage, brutal, brutN, crit, "level", "quest"],
            function (values) {
                var damagedice = values[damage];
                if (values[brutal] == "r<") {
                    damagedice = damagedice + values[brutal] + values[brutN];
                }
                var critdice = values["quest"] + "d6";
                if (values[crit] == "true") {
                    critdice =
                        critdice +
                        " + " +
                        parseInt(damagedice.substring(0, 1)) *
                        Math.ceil(parseInt(values["level"]) / 5) +
                        damagedice.substring(1);
                }
                setAttrs({
                    "repeating_Move_Move-HitBonus-accessory": parseInt(
                        values[attack]
                    ),
                    "repeating_Move_Move-damagedice": damagedice,
                    "repeating_Move_Move-critdice": critdice
                });
            }
        );
    } else {
        getAttrs([attack, damage, "quest"], function (values) {
            var critdice = values["quest"] + "d6";
            setAttrs({
                "repeating_Stanard_Move-HitBonus-accessory": parseInt(
                    values[attack]
                ),
                "repeating_Move_Move-damagedice": values[damage],
                "repeating_Move_Move-critdice": values[critdice]
            });
        });
    }
});

on(
    "change:repeating_move:move-ability change:repeating_move:move-display",
    function (eventInfo) {
        getAttrs(["repeating_Move_Move-Ability"], function (values) {
            var modname = values["repeating_Move_Move-Ability"];
            getAttrs([modname], function (values) {
                setAttrs({
                    "repeating_Move_Move-abimod": parseInt(values[modname])
                });
            });
        });
    }
);

on(
    "change:repeating_move:move-miscattackbonus change:repeating_move:move-abimod change:repeating_move:move-hitbonus-accessory change:repeating_move:move-display",
    function () {
        getAttrs(
            [
                "repeating_move_Move-MiscAttackBonus",
                "repeating_move_Move-abimod",
                "repeating_move_Move-HitBonus-accessory",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_move_Move-MiscAttackBonus"]) +
                    parseInt(values["repeating_move_Move-abimod"]) +
                    parseInt(values["repeating_move_Move-HitBonus-accessory"]) +
                    parseInt(values["Quest"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Move_Move-HitBonus": finalattr
                });
            }
        );
    }
);

on(
    "change:repeating_move:move-miscdamage change:repeating_move:move-abidamage change:repeating_move:move-abimod change:repeating_move:move-display",
    function () {
        getAttrs(
            [
                "repeating_Move_Move-miscdamage",
                "repeating_Move_Move-abidamage",
                "repeating_Move_Move-abimod",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_Move_Move-abidamage"]) *
                    parseInt(values["repeating_Move_Move-abimod"]) +
                    parseInt(values["Quest"]) +
                    parseInt(values["repeating_Move_Move-miscdamage"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Move_Move-flatdamage": finalattr
                });
            }
        );
    }
);

on("change:repeating_move:move-damagedice", function () {
    getAttrs(["repeating_Move_Move-damagedice"], function (values) {
        var numdice = parseInt(values["repeating_Move_Move-damagedice"]);
        var size = 4;
        if (numdice < 10) {
            size = parseInt(
                values["repeating_Move_Move-damagedice"].substring(2)
            );
        } else {
            size = parseInt(
                values["repeating_Move_Move-damagedice"].substring(3)
            );
        }
        var finalattr = numdice * size;
        setAttrs({
            "repeating_Move_Move-critflat": finalattr
        });
    });
});

on("change:repeating_minor:minor-accessory", function (eventInfo) {
    var accessory = eventInfo.newValue;
    var attack = accessory + "-prof";
    var damage = accessory + "-Damage";
    var brutal = accessory + "-Brutal";
    var brutN = accessory + "-BrutN";
    var crit = accessory + "-HighCrit";
    if (accessory.substring(0, 3) == "wep") {
        getAttrs(
            [attack, damage, brutal, brutN, crit, "level", "quest"],
            function (values) {
                var damagedice = values[damage];
                if (values[brutal] == "r<") {
                    damagedice = damagedice + values[brutal] + values[brutN];
                }
                var critdice = values["quest"] + "d6";
                if (values[crit] == "true") {
                    critdice =
                        critdice +
                        " + " +
                        parseInt(damagedice.substring(0, 1)) *
                        Math.ceil(parseInt(values["level"]) / 5) +
                        damagedice.substring(1);
                }
                setAttrs({
                    "repeating_Minor_Minor-HitBonus-accessory": parseInt(
                        values[attack]
                    ),
                    "repeating_Minor_Minor-damagedice": damagedice,
                    "repeating_Minor_Minor-critdice": critdice
                });
            }
        );
    } else {
        getAttrs([attack, damage, "quest"], function (values) {
            var critdice = values["quest"] + "d6";
            setAttrs({
                "repeating_Stanard_Minor-HitBonus-accessory": parseInt(
                    values[attack]
                ),
                "repeating_Minor_Minor-damagedice": values[damage],
                "repeating_Minor_Minor-critdice": values[critdice]
            });
        });
    }
});

on(
    "change:repeating_minor:minor-ability change:repeating_minor:minor-display",
    function (eventInfo) {
        getAttrs(["repeating_Minor_Minor-Ability"], function (values) {
            var modname = values["repeating_Minor_Minor-Ability"];
            getAttrs([modname], function (values) {
                setAttrs({
                    "repeating_Minor_Minor-abimod": parseInt(values[modname])
                });
            });
        });
    }
);

on(
    "change:repeating_minor:minor-miscattackbonus change:repeating_minor:minor-abimod change:repeating_minor:minor-hitbonus-accessory change:repeating_minor:minor-display",
    function () {
        getAttrs(
            [
                "repeating_minor_Minor-MiscAttackBonus",
                "repeating_minor_Minor-abimod",
                "repeating_minor_Minor-HitBonus-accessory",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_minor_Minor-MiscAttackBonus"]) +
                    parseInt(values["repeating_minor_Minor-abimod"]) +
                    parseInt(
                        values["repeating_minor_Minor-HitBonus-accessory"]
                    ) +
                    parseInt(values["Quest"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Minor_Minor-HitBonus": finalattr
                });
            }
        );
    }
);

on(
    "change:repeating_minor:minor-miscdamage change:repeating_minor:minor-abidamage change:repeating_minor:minor-abimod change:repeating_minor:minor-display",
    function () {
        getAttrs(
            [
                "repeating_Minor_Minor-miscdamage",
                "repeating_Minor_Minor-abidamage",
                "repeating_Minor_Minor-abimod",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_Minor_Minor-abidamage"]) *
                    parseInt(values["repeating_Minor_Minor-abimod"]) +
                    parseInt(values["Quest"]) +
                    parseInt(values["repeating_Minor_Minor-miscdamage"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Minor_Minor-flatdamage": finalattr
                });
            }
        );
    }
);

on("change:repeating_minor:minor-damagedice", function () {
    getAttrs(["repeating_Minor_Minor-damagedice"], function (values) {
        var numdice = parseInt(values["repeating_Minor_Minor-damagedice"]);
        var size = 4;
        if (numdice < 10) {
            size = parseInt(
                values["repeating_Minor_Minor-damagedice"].substring(2)
            );
        } else {
            size = parseInt(
                values["repeating_Minor_Minor-damagedice"].substring(3)
            );
        }
        var finalattr = numdice * size;
        setAttrs({
            "repeating_Minor_Minor-critflat": finalattr
        });
    });
});

on("change:repeating_reaction:reaction-accessory", function (eventInfo) {
    var accessory = eventInfo.newValue;
    var attack = accessory + "-prof";
    var damage = accessory + "-Damage";
    var brutal = accessory + "-Brutal";
    var brutN = accessory + "-BrutN";
    var crit = accessory + "-HighCrit";
    if (accessory.substring(0, 3) == "wep") {
        getAttrs(
            [attack, damage, brutal, brutN, crit, "level", "quest"],
            function (values) {
                var damagedice = values[damage];
                if (values[brutal] == "r<") {
                    damagedice = damagedice + values[brutal] + values[brutN];
                }
                var critdice = values["quest"] + "d6";
                if (values[crit] == "true") {
                    critdice =
                        critdice +
                        " + " +
                        parseInt(damagedice.substring(0, 1)) *
                        Math.ceil(parseInt(values["level"]) / 5) +
                        damagedice.substring(1);
                }
                setAttrs({
                    "repeating_Reaction_Reaction-HitBonus-accessory": parseInt(
                        values[attack]
                    ),
                    "repeating_Reaction_Reaction-damagedice": damagedice,
                    "repeating_Reaction_Reaction-critdice": critdice
                });
            }
        );
    } else {
        getAttrs([attack, damage, "quest"], function (values) {
            var critdice = values["quest"] + "d6";
            setAttrs({
                "repeating_Stanard_Reaction-HitBonus-accessory": parseInt(
                    values[attack]
                ),
                "repeating_Reaction_Reaction-damagedice": values[damage],
                "repeating_Reaction_Reaction-critdice": values[critdice]
            });
        });
    }
});

on(
    "change:repeating_reaction:reaction-ability change:repeating_reaction:reaction-display",
    function (eventInfo) {
        getAttrs(["repeating_Reaction_Reaction-Ability"], function (values) {
            var modname = values["repeating_Reaction_Reaction-Ability"];
            getAttrs([modname], function (values) {
                setAttrs({
                    "repeating_Reaction_Reaction-abimod": parseInt(
                        values[modname]
                    )
                });
            });
        });
    }
);

on(
    "change:repeating_reaction:reaction-miscattackbonus change:repeating_reaction:reaction-abimod change:repeating_reaction:reaction-hitbonus-accessory change:repeating_reaction:reaction-display",
    function () {
        getAttrs(
            [
                "repeating_reaction_Reaction-MiscAttackBonus",
                "repeating_reaction_Reaction-abimod",
                "repeating_reaction_Reaction-HitBonus-accessory",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(
                        values["repeating_reaction_Reaction-MiscAttackBonus"]
                    ) +
                    parseInt(values["repeating_reaction_Reaction-abimod"]) +
                    parseInt(
                        values["repeating_reaction_Reaction-HitBonus-accessory"]
                    ) +
                    parseInt(values["Quest"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Reaction_Reaction-HitBonus": finalattr
                });
            }
        );
    }
);

on(
    "change:repeating_reaction:reaction-miscdamage change:repeating_reaction:reaction-abidamage change:repeating_reaction:reaction-abimod change:repeating_reaction:reaction-display",
    function () {
        getAttrs(
            [
                "repeating_Reaction_Reaction-miscdamage",
                "repeating_Reaction_Reaction-abidamage",
                "repeating_Reaction_Reaction-abimod",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["repeating_Reaction_Reaction-abidamage"]) *
                    parseInt(values["repeating_Reaction_Reaction-abimod"]) +
                    parseInt(values["Quest"]) +
                    parseInt(values["repeating_Reaction_Reaction-miscdamage"]);
                if (finalattr >= 0) {
                    finalattr = "+" + finalattr;
                } else {
                    finalattr = "-" + finalattr;
                }
                setAttrs({
                    "repeating_Reaction_Reaction-flatdamage": finalattr
                });
            }
        );
    }
);

on("change:repeating_reaction:reaction-damagedice", function () {
    getAttrs(["repeating_Reaction_Reaction-damagedice"], function (values) {
        var numdice = parseInt(
            values["repeating_Reaction_Reaction-damagedice"]
        );
        var size = 4;
        if (numdice < 10) {
            size = parseInt(
                values["repeating_Reaction_Reaction-damagedice"].substring(2)
            );
        } else {
            size = parseInt(
                values["repeating_Reaction_Reaction-damagedice"].substring(3)
            );
        }
        var finalattr = numdice * size;
        setAttrs({
            "repeating_Reaction_Reaction-critflat": finalattr
        });
    });
});

on(
    "change:acrobatics-train change:acrobatics-miscbonus change:dexmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Acrobatics-Train", "Acrobatics-MiscBonus", "dexmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Acrobatics-Train"]) +
                    parseInt(values["Acrobatics-MiscBonus"]) +
                    parseInt(values["dexmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Acrobatics: finalattr
                });
            }
        );
    }
);

on(
    "change:appeal-train change:appeal-miscbonus change:chamod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Appeal-Train", "Appeal-MiscBonus", "chamod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Appeal-Train"]) +
                    parseInt(values["Appeal-MiscBonus"]) +
                    parseInt(values["chamod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Appeal: finalattr
                });
            }
        );
    }
);

on(
    "change:arcana-train change:arcana-miscbonus change:intmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Arcana-Train", "Arcana-MiscBonus", "intmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Arcana-Train"]) +
                    parseInt(values["Arcana-MiscBonus"]) +
                    parseInt(values["intmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Arcana: finalattr
                });
            }
        );
    }
);

on(
    "change:athletics-train change:athletics-miscbonus change:strmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Athletics-Train", "Athletics-MiscBonus", "strmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Athletics-Train"]) +
                    parseInt(values["Athletics-MiscBonus"]) +
                    parseInt(values["strmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Athletics: finalattr
                });
            }
        );
    }
);

on(
    "change:debate-train change:debate-miscbonus change:intmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Debate-Train", "Debate-MiscBonus", "intmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Debate-Train"]) +
                    parseInt(values["Debate-MiscBonus"]) +
                    parseInt(values["intmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Debate: finalattr
                });
            }
        );
    }
);

on(
    "change:endurance-train change:endurance-miscbonus change:conmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Endurance-Train", "Endurance-MiscBonus", "conmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Endurance-Train"]) +
                    parseInt(values["Endurance-MiscBonus"]) +
                    parseInt(values["conmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Endurance: finalattr
                });
            }
        );
    }
);

on(
    "change:handleanimal-train change:handleanimal-miscbonus change:wismod change:quest sheet:opened",
    function () {
        getAttrs(
            ["HandleAnimal-Train", "HandleAnimal-MiscBonus", "wismod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["HandleAnimal-Train"]) +
                    parseInt(values["HandleAnimal-MiscBonus"]) +
                    parseInt(values["wismod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    HandleAnimal: finalattr
                });
            }
        );
    }
);

on(
    "change:impress-train change:impress-miscbonus change:chamod change:quest sheet:opened sheet:opened",
    function () {
        getAttrs(
            ["Impress-Train", "Impress-MiscBonus", "chamod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Impress-Train"]) +
                    parseInt(values["Impress-MiscBonus"]) +
                    parseInt(values["chamod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Impress: finalattr
                });
            }
        );
    }
);

on(
    "change:insight-train change:insight-miscbonus change:wismod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Insight-Train", "Insight-MiscBonus", "wismod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Insight-Train"]) +
                    parseInt(values["Insight-MiscBonus"]) +
                    parseInt(values["wismod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Insight: finalattr
                });
            }
        );
    }
);

on(
    "change:medicine-train change:medicine-miscbonus change:wismod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Medicine-Train", "Medicine-MiscBonus", "wismod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Medicine-Train"]) +
                    parseInt(values["Medicine-MiscBonus"]) +
                    parseInt(values["wismod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Medicine: finalattr
                });
            }
        );
    }
);

on(
    "change:perception-train change:perception-miscbonus change:wismod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Perception-Train", "Perception-MiscBonus", "wismod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Perception-Train"]) +
                    parseInt(values["Perception-MiscBonus"]) +
                    parseInt(values["wismod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Perception: finalattr
                });
            }
        );
    }
);

on(
    "change:repair-train change:repair-miscbonus change:intmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Repair-Train", "Repair-MiscBonus", "intmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Repair-Train"]) +
                    parseInt(values["Repair-MiscBonus"]) +
                    parseInt(values["intmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Repair: finalattr
                });
            }
        );
    }
);

on(
    "change:research-train change:research-miscbonus change:intmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Research-Train", "Research-MiscBonus", "intmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Research-Train"]) +
                    parseInt(values["Research-MiscBonus"]) +
                    parseInt(values["intmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Research: finalattr
                });
            }
        );
    }
);

on(
    "change:sleightofhand-train change:sleightofhand-miscbonus change:dexmod change:quest sheet:opened",
    function () {
        getAttrs(
            [
                "SleightofHand-Train",
                "SleightofHand-MiscBonus",
                "dexmod",
                "Quest"
            ],
            function (values) {
                var finalattr =
                    parseInt(values["SleightofHand-Train"]) +
                    parseInt(values["SleightofHand-MiscBonus"]) +
                    parseInt(values["dexmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    SleightofHand: finalattr
                });
            }
        );
    }
);

on(
    "change:stealth-train change:stealth-miscbonus change:dexmod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Stealth-Train", "Stealth-MiscBonus", "dexmod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Stealth-Train"]) +
                    parseInt(values["Stealth-MiscBonus"]) +
                    parseInt(values["dexmod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Stealth: finalattr
                });
            }
        );
    }
);

on(
    "change:socialize-train change:socialize-miscbonus change:chamod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Socialize-Train", "Socialize-MiscBonus", "chamod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Socialize-Train"]) +
                    parseInt(values["Socialize-MiscBonus"]) +
                    parseInt(values["chamod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Socialize: finalattr
                });
            }
        );
    }
);

on(
    "change:survival-train change:survival-miscbonus change:wismod change:quest sheet:opened",
    function () {
        getAttrs(
            ["Survival-Train", "Survival-MiscBonus", "wismod", "Quest"],
            function (values) {
                var finalattr =
                    parseInt(values["Survival-Train"]) +
                    parseInt(values["Survival-MiscBonus"]) +
                    parseInt(values["wismod"]) +
                    parseInt(values["Quest"]);
                if (finalattr > 0) {
                    finalattr = "+" + finalattr;
                }
                setAttrs({
                    Survival: finalattr
                });
            }
        );
    }
);

on("change:acrobatics-train sheet:opened", function () {
    getAttrs(["Acrobatics-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Acrobatics-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Acrobatics-Trained": finalattr
        });
    });
});

on("change:appeal-train sheet:opened", function () {
    getAttrs(["Appeal-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Appeal-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Appeal-Trained": finalattr
        });
    });
});

on("change:arcana-train sheet:opened", function () {
    getAttrs(["Arcana-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Arcana-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Arcana-Trained": finalattr
        });
    });
});

on("change:athletics-train sheet:opened", function () {
    getAttrs(["Athletics-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Athletics-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Athletics-Trained": finalattr
        });
    });
});

on("change:debate-train sheet:opened", function () {
    getAttrs(["Debate-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Debate-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Debate-Trained": finalattr
        });
    });
});

on("change:endurance-train sheet:opened", function () {
    getAttrs(["Endurance-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Endurance-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Endurance-Trained": finalattr
        });
    });
});

on("change:handleanimal-train sheet:opened", function () {
    getAttrs(["HandleAnimal-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["HandleAnimal-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "HandleAnimal-Trained": finalattr
        });
    });
});

on("change:impress-train sheet:opened", function () {
    getAttrs(["Impress-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Impress-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Impress-Trained": finalattr
        });
    });
});

on("change:insight-train sheet:opened", function () {
    getAttrs(["Insight-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Insight-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Insight-Trained": finalattr
        });
    });
});

on("change:medicine-train sheet:opened", function () {
    getAttrs(["Medicine-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Medicine-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Medicine-Trained": finalattr
        });
    });
});

on("change:perception-train sheet:opened", function () {
    getAttrs(["Perception-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Perception-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Perception-Trained": finalattr
        });
    });
});

on("change:repair-train sheet:opened", function () {
    getAttrs(["Repair-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Repair-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Repair-Trained": finalattr
        });
    });
});

on("change:research-train sheet:opened", function () {
    getAttrs(["Research-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Research-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Research-Trained": finalattr
        });
    });
});

on("change:sleightofhand-train sheet:opened", function () {
    getAttrs(["SleightofHand-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["SleightofHand-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "SleightofHand-Trained": finalattr
        });
    });
});

on("change:stealth-train sheet:opened", function () {
    getAttrs(["Stealth-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Stealth-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Stealth-Trained": finalattr
        });
    });
});

on("change:socialize-train sheet:opened", function () {
    getAttrs(["Socialize-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Socialize-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Socialize-Trained": finalattr
        });
    });
});

on("change:survival-train sheet:opened", function () {
    getAttrs(["Survival-Train"], function (values) {
        var finalattr = "Untrained";
        var skill = values["Survival-Train"];
        if (skill == 2) {
            finalattr = "Adept";
        } else if (skill == 4) {
            finalattr = "Trained";
        } else if (skill == 6) {
            finalattr = "Experienced";
        } else if (skill == 8) {
            finalattr = "Expert";
        } else if (skill == 10) {
            finalattr = "Master";
        }
        setAttrs({
            "Survival-Trained": finalattr
        });
    });
});

on("change:repeating_onpersonitems:onpersonitem-quantity change:repeating_onpersonitems:onpersonitem-space", function () {
    getSectionIDs("onpersonitems", function(idarray) {
        var totalSpace = 0;
        var quantArray = []; 
        var sizeArray = [];
        for(var i=0; i < idarray.length; i++) {
            quantArray.push("repeating_onpersonitems_" + idarray[i] + "_OnPersonItem-Quantity");
            sizeArray.push("repeating_onpersonitems_" + idarray[i] + "_OnPersonItem-Space");
        }
        getAttrs(quantArray.concat(sizeArray), function(values) {
            // console.log(values);
            for (i=0; i<idarray.length; i++) {
                totalSpace+= values[quantArray[i]] * values[sizeArray[i]];
            }
            // console.log(totalSpace);
            setAttrs({
                currentSpace: totalSpace
            })
        });
     });
});
</script>